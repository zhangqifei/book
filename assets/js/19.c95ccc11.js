(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{367:function(s,a,t){"use strict";t.r(a);var n=t(43),e=Object(n.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"linux软件包企业实战"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#linux软件包企业实战"}},[s._v("#")]),s._v(" Linux软件包企业实战")]),s._v(" "),t("p",[s._v("Linux整个体系的关键不在于系统本身没，而是基于Linux系统去安装和配置企业中相关的软件、数据及应用程序，所以对软件的维护是运维工程师职责的重中之重")]),s._v(" "),t("h2",{attrs:{id:"rpm软件包管理"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#rpm软件包管理"}},[s._v("#")]),s._v(" RPM软件包管理")]),s._v(" "),t("p",[s._v("Linux软件包可分为二进制包和源码包，不通类别的软件包使用的管理工具也各不相同，源码包是没有经过编译的包，需要经过GCC、C++编译器环境编译才能运行，二进制包无需编译，可以直接安装使用。")]),s._v(" "),t("p",[s._v("通常而言，可以通过后缀区别源码包和二进制包，例如以.tar.gz、.zip、.rar结尾的包成为源码包，以rpm结尾的软件包称为二进制包。真正区分是否为源码包还是二进制包还得基于软件包里面的文件来判断，例如.h、.c、.cpp、.cc等结尾的源码文件，称为源码包，而代码里面存在bin可执行文件，称为二进制包。")]),s._v(" "),t("p",[s._v("rpm命令是RPM软件包的管理工具。rpm原本是Red Hat Linux发行版专门用来管理Linux各项套件的程序，由于它遵循GPL规则且功能强大方便，因而广受欢迎。逐渐受到其他发行版的采用。RPM套件管理方式的出现，让Linux易于安装，升级，间接提升了Linux的适用度。")]),s._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[s._v("RPM包命名格式如下：\nname-version.rpm\nname-version-noarch.rpm\nname-version-arch.src.rpm\n\n软件包格式\nepel-release-6-8.noarch.rpm\nperl-Pod-Plainer-1.03-1.e16.noarch.rpm\nyasm-1.2.0-4.el7.x86_64.rpm\n....\n")])])]),t("hr"),s._v(" "),t("p",[t("strong",[s._v("RPM包格式解析")])]),s._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[s._v("name：软件名你。例如yasm、perl-pod-Plainer\nversion：版本号.1.2.0通用格式为“主版本号，次版本号，修正号”，其中4表示发布版本号，意味着该RPM包是第几次编译生成的。\narch：适用的硬件平台，RPM支持的平台有i386.i586、1686.x86_64、sparc、alpha等\n.rpm：后缀包表示编译好的二进制包，可用rpm命令直接安装。\n.src.rpm：源代码包，源码编译生成，rpm格式的RPM包方可使用。\nel*：软件包发行版本，e16表示该软件包适用干RHEL 6.X/CenOS6.X。\ndevel：开发包。\nnoarch：软件包可以在任何平台上安装。\n")])])]),t("p",[t("strong",[s._v("RPM工具命令详解")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("-a 　显示所有已经安装的软件包。\n-e<套件档>或--erase<套件档> 卸载RPM软件包。\n-f<文件>+ 　查询拥有file的软件包。\n-h或--hash 　软件安装，可以打印安装进度条。\n-i 　显示软件包的相关信息。\n-l 　显示软件包的文件列表。\n-q 　使用询问模式，当遇到任何问题时，rpm指令会先询问用户。\n-R 　列出软件包依赖的其他软件包。\n-U<套件档>或--upgrade<套件档> 升级指定的软件包。\n-v 　显示指令执行过程。\n-vv 　详细显示指令执行过程，便于排错。\n--last 列出软件包时，并以安装时间顺序排序，最新的在最上面。\n--force 表示强制，强制安转强制卸载。\n--nodeps RPM包不依赖。\n-l或--list 列出软件包中的文件。\n--scripts 列出软件包自定义的小程序。\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br")])]),t("p",[t("strong",[s._v("RPM企业案例演示")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("rpm -q httpd    //检查httpd包是否安装\nrpm -ql httpd   //查看软件安装的路径\nrpm -qi httpd   //查看软件安装的版本信息\nrpm -e httpd    //卸载httpd软件\nrpm -e  --nodeps httpd  //强制卸载httpd\nrpm -qa | grep httpd    //检查httpd相关的软件是否安装\nrpm -ivh httpd-2.4.34-6.fc30.x86_64.rpm  //安装httpd软件\nrpm -Uvh httpd-2.4.34-6.fc30.x86_64.rpm  //升级httpd软件\nrpm -ivh --nodeps httpd-2.4.34-6.fc30.x86_64.rpm  //不依赖其他软件包\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br")])]),t("h2",{attrs:{id:"tar软件包管理"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#tar软件包管理"}},[s._v("#")]),s._v(" tar软件包管理")]),s._v(" "),t("p",[s._v("Linux操作系统出来使用RPM管理工具对二进制软件包管理之外，还可以通过tar、zip、jar等工具对源码包软件进行管理。")]),s._v(" "),t("h3",{attrs:{id:"tar命令参数详解"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#tar命令参数详解"}},[s._v("#")]),s._v(" tar命令参数详解")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v('-A或--catenate 新增文件到已存在的备份文件。\n-b<区块数目>或--blocking-factor=<区块数目> 设置每笔记录的区块数目，每个区块大小为12Bytes。\n-B或--read-full-records 读取数据时重设区块大小。\n-c或--create 建立新的备份文件。\n-C<目的目录>或--directory=<目的目录> 切换到指定的目录。\n-d或--diff或--compare 对比备份文件内和文件系统上的文件的差异。\n-f<备份文件>或--file=<备份文件> 指定备份文件。\n-F<Script文件>或--info-script=<Script文件> 每次更换磁带时，就执行指定的Script文件。\n-g或--listed-incremental 处理GNU格式的大量备份。\n-G或--incremental 处理旧的GNU格式的大量备份。\n-h或--dereference 不建立符号连接，直接复制该连接所指向的原始文件。\n-i或--ignore-zeros 忽略备份文件中的0 Byte区块，也就是EOF。\n-k或--keep-old-files 解开备份文件时，不覆盖已有的文件。\n-K<文件>或--starting-file=<文件> 从指定的文件开始还原。\n-l或--one-file-system 复制的文件或目录存放的文件系统，必须与tar指令执行时所处的文件系统相同，否则不予复制。\n-L<媒体容量>或-tape-length=<媒体容量> 设置存放每体的容量，单位以1024 Bytes计算。\n-m或--modification-time 还原文件时，不变更文件的更改时间。\n-M或--multi-volume 在建立，还原备份文件或列出其中的内容时，采用多卷册模式。\n-N<日期格式>或--newer=<日期时间> 只将较指定日期更新的文件保存到备份文件里。\n-o或--old-archive或--portability 将资料写入备份文件时使用V7格式。\n-O或--stdout 把从备份文件里还原的文件输出到标准输出设备。\n-p或--same-permissions 用原来的文件权限还原文件。\n-P或--absolute-names 文件名使用绝对名称，不移除文件名称前的"/"号。\n-r或--append 新增文件到已存在的备份文件的结尾部分。\n-R或--block-number 列出每个信息在备份文件中的区块编号。\n-s或--same-order 还原文件的顺序和备份文件内的存放顺序相同。\n-S或--sparse 倘若一个文件内含大量的连续0字节，则将此文件存成稀疏文件。\n-t或--list 列出备份文件的内容。\n-T<范本文件>或--files-from=<范本文件> 指定范本文件，其内含有一个或多个范本样式，让tar解开或建立符合设置条件的文件。\n-u或--update 仅置换较备份文件内的文件更新的文件。\n-U或--unlink-first 解开压缩文件还原文件之前，先解除文件的连接。\n-v或--verbose 显示指令执行过程。\n-V<卷册名称>或--label=<卷册名称> 建立使用指定的卷册名称的备份文件。\n-w或--interactive 遭遇问题时先询问用户。\n-W或--verify 写入备份文件后，确认文件正确无误。\n-x或--extract或--get 从备份文件中还原文件。\n-X<范本文件>或--exclude-from=<范本文件> 指定范本文件，其内含有一个或多个范本样式，让ar排除符合设置条件的文件。\n-z或--gzip或--ungzip 通过gzip指令处理备份文件。\n-Z或--compress或--uncompress 通过compress指令处理备份文件。\n-<设备编号><存储密度> 设置备份用的外围设备编号及存放数据的密度。\n--after-date=<日期时间> 此参数的效果和指定"-N"参数相同。\n--atime-preserve 不变更文件的存取时间。\n--backup=<备份方式>或--backup 移除文件前先进行备份。\n--checkpoint 读取备份文件时列出目录名称。\n--concatenate 此参数的效果和指定"-A"参数相同。\n--confirmation 此参数的效果和指定"-w"参数相同。\n--delete 从备份文件中删除指定的文件。\n--exclude=<范本样式> file不把指定文件包含在内。\n--group=<群组名称> 把加入设备文件中的文件的所属群组设成指定的群组。\n--help 在线帮助。\n--ignore-failed-read 忽略数据读取错误，不中断程序的执行。\n--new-volume-script=<Script文件> 此参数的效果和指定"-F"参数相同。\n--newer-mtime 只保存更改过的文件。\n--no-recursion 不做递归处理，也就是指定目录下的所有文件及子目录不予处理。\n--null 从null设备读取文件名称。\n--numeric-owner 以用户识别码及群组识别码取代用户名称和群组名称。\n--owner=<用户名称> 把加入备份文件中的文件的拥有者设成指定的用户。\n--posix 将数据写入备份文件时使用POSIX格式。\n--preserve 此参数的效果和指定"-ps"参数相同。\n--preserve-order 此参数的效果和指定"-A"参数相同。\n--preserve-permissions 此参数的效果和指定"-p"参数相同。\n--record-size=<区块数目> 此参数的效果和指定"-b"参数相同。\n--recursive-unlink 解开压缩文件还原目录之前，先解除整个目录下所有文件的连接。\n--remove-files 文件加入备份文件后，就将其删除。\n--rsh-command=<执行指令> 设置要在远端主机上执行的指令，以取代rsh指令。\n--same-owner 尝试以相同的文件拥有者还原问家你。\n--suffix=<备份字尾字符串> 移除文件前先行备份。\n--totals 备份文件建立后，列出文件大小。\n--use-compress-program=<执行指令> 通过指定的指令处理备份文件。\n--version 显示版本信息。\n--volno-file=<编号文件> 使用指定文件内的编号取代预设的卷册编号。\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br"),t("span",{staticClass:"line-number"},[s._v("32")]),t("br"),t("span",{staticClass:"line-number"},[s._v("33")]),t("br"),t("span",{staticClass:"line-number"},[s._v("34")]),t("br"),t("span",{staticClass:"line-number"},[s._v("35")]),t("br"),t("span",{staticClass:"line-number"},[s._v("36")]),t("br"),t("span",{staticClass:"line-number"},[s._v("37")]),t("br"),t("span",{staticClass:"line-number"},[s._v("38")]),t("br"),t("span",{staticClass:"line-number"},[s._v("39")]),t("br"),t("span",{staticClass:"line-number"},[s._v("40")]),t("br"),t("span",{staticClass:"line-number"},[s._v("41")]),t("br"),t("span",{staticClass:"line-number"},[s._v("42")]),t("br"),t("span",{staticClass:"line-number"},[s._v("43")]),t("br"),t("span",{staticClass:"line-number"},[s._v("44")]),t("br"),t("span",{staticClass:"line-number"},[s._v("45")]),t("br"),t("span",{staticClass:"line-number"},[s._v("46")]),t("br"),t("span",{staticClass:"line-number"},[s._v("47")]),t("br"),t("span",{staticClass:"line-number"},[s._v("48")]),t("br"),t("span",{staticClass:"line-number"},[s._v("49")]),t("br"),t("span",{staticClass:"line-number"},[s._v("50")]),t("br"),t("span",{staticClass:"line-number"},[s._v("51")]),t("br"),t("span",{staticClass:"line-number"},[s._v("52")]),t("br"),t("span",{staticClass:"line-number"},[s._v("53")]),t("br"),t("span",{staticClass:"line-number"},[s._v("54")]),t("br"),t("span",{staticClass:"line-number"},[s._v("55")]),t("br"),t("span",{staticClass:"line-number"},[s._v("56")]),t("br"),t("span",{staticClass:"line-number"},[s._v("57")]),t("br"),t("span",{staticClass:"line-number"},[s._v("58")]),t("br"),t("span",{staticClass:"line-number"},[s._v("59")]),t("br"),t("span",{staticClass:"line-number"},[s._v("60")]),t("br"),t("span",{staticClass:"line-number"},[s._v("61")]),t("br"),t("span",{staticClass:"line-number"},[s._v("62")]),t("br"),t("span",{staticClass:"line-number"},[s._v("63")]),t("br"),t("span",{staticClass:"line-number"},[s._v("64")]),t("br"),t("span",{staticClass:"line-number"},[s._v("65")]),t("br"),t("span",{staticClass:"line-number"},[s._v("66")]),t("br"),t("span",{staticClass:"line-number"},[s._v("67")]),t("br"),t("span",{staticClass:"line-number"},[s._v("68")]),t("br"),t("span",{staticClass:"line-number"},[s._v("69")]),t("br"),t("span",{staticClass:"line-number"},[s._v("70")]),t("br"),t("span",{staticClass:"line-number"},[s._v("71")]),t("br")])]),t("h3",{attrs:{id:"tar企业案例演示"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#tar企业案例演示"}},[s._v("#")]),s._v(" tar企业案例演示")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("tar -cvf file.tar.gz file   #打包file文件或者目录，打包后名字为file.tar.gz\ntar -tf file.tar.gz         #查看file.tar.gz包中的内容\ntar -rf file.tar.gz file2   #将file2文件追加到file.tar.gz中\ntar -xvf file.tar.gz        #解压file.tar.gz程序包\ntar -czvf file.tar.gz file  #使用gzip格式打包并压缩file文件或目录\ntar -cjvf file.tar.bz2 file #使用bzip2格式打包并压缩file文件或目录\ntar -czf file.tar.gz * -X list.txt  #使用gzip格式打包并压缩当前目录所有文件，排除list.txt中记录的文件\ntar -czf file.tar.gz * --exclude=zabbix-3.2.4.tar.gz --exclude=nginx-1.12.0.tar.gz  #使用gzip格式打包并压缩所有文件和目录，排除zabbix..*、nginx..*软件包\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br")])]),t("h3",{attrs:{id:"tar实现linux操作系统备份"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#tar实现linux操作系统备份"}},[s._v("#")]),s._v(" tar实现Linux操作系统备份")]),s._v(" "),t("p",[s._v("tar命令工具除了用于日常打包、解压源码包之外，最大的亮点还可以用于Linux操作系统文件及目录的备份。使用"),t("code",[s._v("tar -g")]),s._v("可以基干GNU格式做增量各份，备份原理是检查目录和文件的（atime，mtime，ctime）属性是否被修改。文件及日录时间属性详解如下:")]),s._v(" "),t("ul",[t("li",[s._v("文件被访问的时间(access time,atime)")]),s._v(" "),t("li",[s._v("文件内容被改变的时间(modified time,mtime)")]),s._v(" "),t("li",[s._v("文件写入、权限更改的时间(change time，ctime)")])]),s._v(" "),t("p",[s._v("总结:更改文件内容mtime和ctime都会改变，但ctime可以在mtime未发生变化时被改。例如修改文件权限文件mtime时间不变而ctime时间改变。tar增量备份案例演示骤如下：")]),s._v(" "),t("ol",[t("li",[s._v("在/root 目录创建bak文件夹，同时在文件夹中创建file1.txt、file2.txt两个文件")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("[root@localhost bak]# touch file{1..2}.txt\n[root@localhost bak]# \n[root@localhost bak]# ll\ntotal 0\n-rw-r--r-- 1 root root 0 Sep 13 11:42 file1.txt\n-rw-r--r-- 1 root root 0 Sep 13 11:42 file2.txt\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])]),t("ol",{attrs:{start:"2"}},[t("li",[s._v("使用tar命令创建第一次完整备份bak文件夹，-g指定快照snapshot文件，第一次没有该文件则会自动创建。")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("[root@localhost bak]# tar -g /data/backup/snapshot -czvf /data/backup/2018bak.tar.gz *\nfile1.txt\nfile2.txt\n[root@localhost bak]# ll /data/backup/\ntotal 8\n-rw-r--r-- 1 root root 130 Sep 13 11:43 2018bak.tar.gz\n-rw-r--r-- 1 root root  36 Sep 13 11:43 snapshot\n[root@localhost bak]# cat /data/backup/snapshot \nGNU tar-1.26-2\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br")])]),t("ol",{attrs:{start:"3"}},[t("li",[s._v("使用tar命令第一次完成备份bak文件夹会生成快照文件/data/backup/snapshot,后期增量备份会以snapshot文件为参考。在bak文件夹中在创建file3.txt、file4.txt、file5.txt文件，然后在通过tar命令增量备份到backup文件所有内容")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("[root@localhost bak]# touch file{3..5}.txt\n[root@localhost bak]# ll\ntotal 0\n-rw-r--r-- 1 root root 0 Sep 13 11:42 file1.txt\n-rw-r--r-- 1 root root 0 Sep 13 11:42 file2.txt\n-rw-r--r-- 1 root root 0 Sep 13 17:04 file3.txt\n-rw-r--r-- 1 root root 0 Sep 13 17:04 file4.txt\n-rw-r--r-- 1 root root 0 Sep 13 17:04 file5.txt\n[root@localhost bak]# tar -g /data/backup/snapshot -czvf /data/backup/2018bak1.tar.gz *\nfile3.txt\nfile4.txt\nfile5.txt\n[root@localhost bak]# ll /data/backup/\ntotal 12\n-rw-r--r-- 1 root root 137 Sep 13 17:06 2018bak1.tar.gz\n-rw-r--r-- 1 root root 130 Sep 13 11:43 2018bak.tar.gz\n-rw-r--r-- 1 root root  36 Sep 13 17:06 snapshot\n[root@localhost bak]# tar -tf /data/backup/2018bak1.tar.gz \nfile3.txt\nfile4.txt\nfile5.txt\n[root@localhost bak]# tar -tf /data/backup/2018bak.tar.gz  \nfile1.txt\nfile2.txt\n[root@localhost bak]# cat /data/backup/snapshot \nGNU tar-1.26-2\n1536829618865715059\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br")])]),t("p",[s._v("增量备份是需-g指定第一次完整备份的快照snapshot，同时增量打包的文件名不能与第一次备份文件重名，通过"),t("code",[s._v("tar -tf")]),s._v("可以查看打包的文件内容")]),s._v(" "),t("h3",{attrs:{id:"shell-tar实现增量备份"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#shell-tar实现增量备份"}},[s._v("#")]),s._v(" shell+tar实现增量备份")]),s._v(" "),t("p",[s._v("企业中日常备份的数据包括/boot/、/etc、/root、/data等目录，备份策略为每周一至周六执行增量备份，每周日执行全备份。在企业中备份操作系统数据均使用shell脚本完成，此处auto_backup_system.sh备份脚本供参考。")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("待更新\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h2",{attrs:{id:"zip软件包管理"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#zip软件包管理"}},[s._v("#")]),s._v(" zip软件包管理")]),s._v(" "),t("p",[s._v("Zip是计算机文件的压缩算法，原名deflate（真空），发明者为菲利普·卡兹（Philip Katz）他于1989年1月公布了改格式的资料。zip软件包名后缀通常使用zip。")]),s._v(" "),t("p",[s._v("主流的压缩格式包括tar、rar、zip、war、gzip、bz2、iso等，性能上tar、war、rar格式比zip格式压缩率高，但压缩时间运远高于zip。zip工具可以实现对zip包进行管理，也可以将文件和文件夹打包成zip包。")]),s._v(" "),t("p",[t("strong",[s._v("zip工具常见的参数如下")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v('-A 调整可执行的自动解压缩文件。\n-b<工作目录> 指定暂时存放文件的目录。\n-c 替每个被压缩的文件加上注释。\n-d 从压缩文件内删除指定的文件。\n-D 压缩文件内不建立目录名称。\n-f 此参数的效果和指定"-u"参数类似，但不仅更新既有文件，如果某些文件原本不存在于压缩文件内，使用本参数会一并将其加入压缩文件中。\n-F 尝试修复已损坏的压缩文件。\n-g 将文件压缩后附加在既有的压缩文件之后，而非另行建立新的压缩文件。\n-h 在线帮助。\n-i<范本样式> 只压缩符合条件的文件。\n-j 只保存文件名称及其内容，而不存放任何目录名称。\n-J 删除压缩文件前面不必要的数据。\n-k 使用MS-DOS兼容格式的文件名称。\n-l 压缩文件时，把LF字符置换成LF+CR字符。\n-ll 压缩文件时，把LF+CR字符置换成LF字符。\n-L 显示版权信息。\n-m 将文件压缩并加入压缩文件后，删除原始文件，即把文件移到压缩文件中。\n-n<字尾字符串> 不压缩具有特定字尾字符串的文件。\n-o 以压缩文件内拥有最新更改时间的文件为准，将压缩文件的更改时间设成和该文件相同。\n-q 不显示指令执行过程。\n-r 递归处理，将指定目录下的所有文件和子目录一并处理。\n-S 包含系统和隐藏文件。\n-t<日期时间> 把压缩文件的日期设成指定的日期。\n-T 检查备份文件内的每个文件是否正确无误。\n-u 更换较新的文件到压缩文件内。\n-v 显示指令执行过程或显示版本信息。\n-V 保存VMS操作系统的文件属性。\n-w 在文件名称里假如版本编号，本参数仅在VMS操作系统下有效。\n-x<范本样式> 压缩时排除符合条件的文件。\n-X 不保存额外的文件属性。\n-y 直接保存符号连接，而非该连接所指向的文件，本参数仅在UNIX之类的系统下有效。\n-z 替压缩文件加上注释。\n-$ 保存第一个被压缩文件所在磁盘的卷册名称。\n-<压缩效率> 压缩效率是一个介于1-9的数值。\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br"),t("span",{staticClass:"line-number"},[s._v("32")]),t("br"),t("span",{staticClass:"line-number"},[s._v("33")]),t("br"),t("span",{staticClass:"line-number"},[s._v("34")]),t("br")])]),t("h3",{attrs:{id:"zip企业案例演示"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#zip企业案例演示"}},[s._v("#")]),s._v(" zip企业案例演示")]),s._v(" "),t("ol",[t("li",[s._v("通过zip工具打包bak文件中所有内容。")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("[root@localhost ~]# ll\ndrwxr-xr-x 2 root root  4096 Sep 13 17:17 bak\n[root@localhost ~]# zip -rv bak.zip bak/\n  adding: bak/  (in=0) (out=0) (stored 0%)\n  adding: bak/file4.txt (in=0) (out=0) (stored 0%)\n  adding: bak/file2.txt (in=0) (out=0) (stored 0%)\n  adding: bak/file1.txt (in=0) (out=0) (stored 0%)\n  adding: bak/file5.txt (in=0) (out=0) (stored 0%)\n  adding: bak/file3.txt (in=0) (out=0) (stored 0%)\ntotal bytes=0, compressed=0 -> 0% savings\n[root@localhost ~]# ll\ndrwxr-xr-x 2 root root  4096 Sep 13 17:17 bak\n-rw-r--r-- 1 root root   928 Sep 13 18:01 bak.zip\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br")])]),t("ol",{attrs:{start:"2"}},[t("li",[s._v("通过zip工具打包bak文件夹中所有内容并排除部分文件")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("[root@localhost ~]# cd bak/\n[root@localhost bak]# ll\ntotal 0\n-rw-r--r-- 1 root root 0 Sep 13 11:42 file1.txt\n-rw-r--r-- 1 root root 0 Sep 13 11:42 file2.txt\n-rw-r--r-- 1 root root 0 Sep 13 17:04 file3.txt\n-rw-r--r-- 1 root root 0 Sep 13 17:04 file4.txt\n-rw-r--r-- 1 root root 0 Sep 13 17:04 file5.txt\n[root@localhost bak]# zip -rv bak.zip * -x file1.txt \n  adding: file2.txt     (in=0) (out=0) (stored 0%)\n  adding: file3.txt     (in=0) (out=0) (stored 0%)\n  adding: file4.txt     (in=0) (out=0) (stored 0%)\n  adding: file5.txt     (in=0) (out=0) (stored 0%)\ntotal bytes=0, compressed=0 -> 0% savings\n[root@localhost bak]# zip -rv bak2.zip * -x file1.txt -x file3.txt \n  adding: bak.zip       (in=606) (out=606) (stored 0%)\n  adding: file2.txt     (in=0) (out=0) (stored 0%)\n  adding: file4.txt     (in=0) (out=0) (stored 0%)\n  adding: file5.txt     (in=0) (out=0) (stored 0%)\ntotal bytes=606, compressed=606 -> 0% savings\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br")])]),t("ol",{attrs:{start:"3"}},[t("li",[s._v("通过zip工具删除bak.zip中file5.txt文件")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("[root@localhost bak]# zip bak2.zip -d file5.txt \ndeleting: file5.txt\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("ol",{attrs:{start:"4"}},[t("li",[s._v("通过uzip工具解压bak.zip文件")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("[root@localhost bak]# mkdir zip\n[root@localhost bak]# unzip bak2.zip -d zip/\nArchive:  bak2.zip\n extracting: zip/bak.zip             \n extracting: zip/file2.txt           \n extracting: zip/file4.txt           \n[root@localhost bak]# ll zip/\ntotal 4\n-rw-r--r-- 1 root root 606 Sep 13 18:07 bak.zip\n-rw-r--r-- 1 root root   0 Sep 13 11:42 file2.txt\n-rw-r--r-- 1 root root   0 Sep 13 17:04 file4.txt\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br")])]),t("blockquote",[t("p",[s._v("可以用 -d 参数指定解压后的目录")])]),s._v(" "),t("h2",{attrs:{id:"源码包软件安装"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#源码包软件安装"}},[s._v("#")]),s._v(" 源码包软件安装")]),s._v(" "),t("p",[s._v("通常使用RPM工具管理，rpm结尾的二进制包，而标准的以.zip、.tzr结尾的源代码包则不能使用RPM工具去安装、卸载及升级。")]),s._v(" "),t("p",[t("strong",[s._v("源码包安装有以下三个步骤")])]),s._v(" "),t("ul",[t("li",[s._v("./configure:预编译，主要用于检测系统基准环境库是否满足gcc环境，生成makefile文件。")]),s._v(" "),t("li",[s._v("make：编译，基于第一步生成的makefile文件，进行源代码的编译。")]),s._v(" "),t("li",[s._v("make install：安装，编译完毕后将相关文件的可运行文件安装至系统中。")])]),s._v(" "),t("p",[s._v("使用make编译时Linux操作系统必须有GCC编译器，用于编译源码。\n源码包安装通常需要./configure、make、namke install三个步骤，某些特殊源码可以只有三步中的其中一个或者两个步骤。")]),s._v(" "),t("p",[t("strong",[s._v("以CentOS7 Linux系统为基准，在其上安装nginx源码包，企业中源码安装软件的详细步骤如下：")])]),s._v(" "),t("ol",[t("li",[s._v("从nginx官网下载nginx-1.14.0.tar.gz源码包")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("wget http://nginx.org/download/nginx-1.14.0.tar.gz\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("ol",{attrs:{start:"2"}},[t("li",[s._v("nginx源码包解压")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("tar xvf nginx-1.14.0.tar.gz\ncd nginx-1.14.0/\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("ol",{attrs:{start:"3"}},[t("li",[s._v("安装依赖的的包")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("yum install gcc -y\nyum -y install pcre-devel\nyum -y install zlib zlib-devel\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("ol",{attrs:{start:"4"}},[t("li",[s._v("执行./configure指令进行预编译")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("./configure\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("ol",{attrs:{start:"5"}},[t("li",[s._v("make编译及make install安装")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("make && make install\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("ol",{attrs:{start:"6"}},[t("li",[s._v("nginx安装的路径")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("[root@localhost ~]# find /|grep nginx.conf\n/usr/local/nginx/conf\n/usr/local/nginx/conf/win-utf\n/usr/local/nginx/conf/mime.types.default\n/usr/local/nginx/conf/koi-win\n/usr/local/nginx/conf/fastcgi_params.default\n/usr/local/nginx/conf/scgi_params.default\n/usr/local/nginx/conf/fastcgi_params\n/usr/local/nginx/conf/koi-utf\n/usr/local/nginx/conf/fastcgi.conf\n/usr/local/nginx/conf/uwsgi_params\n/usr/local/nginx/conf/fastcgi.conf.default\n/usr/local/nginx/conf/nginx.conf\n/usr/local/nginx/conf/mime.types\n/usr/local/nginx/conf/nginx.conf.default\n/usr/local/nginx/conf/uwsgi_params.default\n/usr/local/nginx/conf/scgi_params\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br")])]),t("p",[s._v("通过以上步骤，源码包软件安装成功。源码包在编译安装时，可能会遇到各种错误，需要把错误解决之后，在进行下一步安装即可。后面会详细的介绍nginx这里只是举例。")]),s._v(" "),t("h2",{attrs:{id:"yum软件包管理"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#yum软件包管理"}},[s._v("#")]),s._v(" YUM软件包管理")]),s._v(" "),t("p",[s._v("前端软件包管理器（Yellow dog Updater Modified，YUM）适用于CentOS、Fedora、RedHat及SUSE等操作系统，主要用于管理RPM包，YUM工具能够从指定的服务器自动下载RPM包并且安装，还可以自动处理依赖性关系。")]),s._v(" "),t("p",[s._v("使用RPM工具管理和安装软件时，会发现RPM包有依赖，需要逐个手动下载安装，而YUM工具的最大便利就是可以自动安装所有依赖的软件包，从而提升效率，节省时间。")]),s._v(" "),t("h3",{attrs:{id:"yum工作原理"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#yum工作原理"}},[s._v("#")]),s._v(" YUM工作原理")]),s._v(" "),t("p",[s._v("学习YUM一定要理解YUM的工作原理。YUM正常运行需要依赖两个部分：一个YUM服务端；二是YUM客户端。")]),s._v(" "),t("p",[s._v("YUM客户端安装的所有RPM包全部是来自YUM服务端，YUM服务端只要提供简单的下载就可以了，ftp或者http的形式都可以。YUM服务器有一个最重要的环节就是整理出每个rpm包的基本信息，包括rpm包对应的版本号，conf文件，binary信息，以及很关键的依赖信息。")]),s._v(" "),t("p",[s._v("YUM客户端每次调用yum install或者search的时候，都会去解析/etc/yum.repos.d下面所有以.repo结尾的配置文件，这些配置文件指定了YUM服务器的镜像地址。CentOS linux默认的.repo文件名为CentOS-Base.repo。所以每次安装、升级RPM包YUM客户端均会查找.repo文件。")]),s._v(" "),t("p",[s._v("YUM客户端如果配置了CentOS官方repo源，客户端操作系统必须能联通外网，满足网络条件下才能下载并安装，如果没有网络则需要构建光盘源、ISO镜像、YUM内部源。YUM客户端安装软件，默认会把YUM源地址、header信息、软件包、数据库信息、缓存文件存储在"),t("code",[s._v("/var/cache/yum")]),s._v("中，每次使用YUM工具，YUm优先通过cache查找相关软件包，cache中不存在，然后在访问外网的YUM源。")]),s._v(" "),t("h3",{attrs:{id:"yum企业案例演练"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#yum企业案例演练"}},[s._v("#")]),s._v(" YUM企业案例演练")]),s._v(" "),t("p",[s._v("YUM工具的使用简便、快捷、高效。\nYUM常用命令：")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v('yum install httpd   # 安装httpd安装包\nyum search httpd    # 搜索httpd安装包\nyum repolist        # 查看仓库\nyum list            # 显示已经安装及可安装的软件包\nyum list httpd      # 显示httpd程序包的安装情况\nyum remove httpd    # 删除httpd软件包\nyum erase httpd     # 删除httpd程序包\nyum update          # 更新所有软件命令\nyum update httpd    # 更新httpd软件\nyum check-update    # 列出所有可更新的软件清单\nyum info httpd      # 显示httpd安装包信息\nyum provides "*/rz" # 列出rz命令由那个软件包所提供\nyum grouplist       # 查询可以用groupinstall命令安装的组名称\nyum groupinstall "Chinese Support"  # 安装中文支持\nyum groupremove "Chinese Support"   # 删除中文支持\nyum deplist httpd   # 查看程序httpd依赖情况\nyum clean packages  # 清除缓存目录下的软件包\nyum clean headers   # 清除缓存目录下的 headers\nyum clean oldheaders# 清除缓存目录下旧的 headers\nyum clean all       # 清除缓存目录下的软件包及旧的 headers\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br")])]),t("h2",{attrs:{id:"基于iso镜像构建yum本地源"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#基于iso镜像构建yum本地源"}},[s._v("#")]),s._v(" 基于ISO镜像构建YUM本地源")]),s._v(" "),t("p",[s._v("通常而言，YUM客户端使用前提是必须联外网，YUM安装软件会检查.repo配置文件查找相应的YUM源仓库。企业IDC机房很多服务器为了安全起见，会禁止服务器上外网，因此不能使用默认官方YUM源仓库，需要自建本地YUM仓库。")]),s._v(" "),t("p",[t("strong",[s._v("虚拟机上利用ISO文件制作本地yum源")])]),s._v(" "),t("ol",[t("li",[s._v("查看/dev/cdrom，并挂载到/mnt/iso/下，使用df -h命令查询挂载是否成功")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("[root@localhost ~]# ll /dev/cdrom \nlrwxrwxrwx. 1 root root 3 Sep 14 17:07 /dev/cdrom -> sr0\n[root@localhost ~]# mount /dev/cdrom /mnt/iso/\nmount: /dev/sr0 is write-protected, mounting read-only\n[root@localhost ~]# ls /mnt/iso/\nCentOS_BuildTag  EFI  EULA  GPL  images  isolinux  LiveOS  Packages  repodata  RPM-GPG-KEY-CentOS-7  RPM-GPG-KEY-CentOS-Testing-7  TRANS.TBL\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])]),t("ol",{attrs:{start:"2"}},[t("li",[s._v("在/etc/yum.repo.d/目录下编辑base.repo文件")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("[root@localhost yum.repos.d]# vim base.repo \n[base_ISO]\n## yum源显示名称\nname=centos7\n## ISO镜像挂在目录\nbaseurl=file:///mnt/iso\n## 是否启动yum源\nenabled=1\n## 是否检查GPG-KEY\ngpgcheck=0\n##指定载目录下的GPG-KEY文件验证 \ngpgkey=http://mirrors.tencentyun.com/centos/RPM-GPG-KEY-CentOS-7\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br")])]),t("ol",{attrs:{start:"3"}},[t("li",[s._v("检查是否配置成功")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("[root@localhost yum.repos.d]# yum repolist \nLoaded plugins: fastestmirror\nRepodata is over 2 weeks old. Install yum-cron? Or run: yum makecache fast\nLoading mirror speeds from cached hostfile\nrepo id            repo name     status\nbase_ISO           centos7       9,911\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])]),t("h2",{attrs:{id:"基于http构建yum网络源"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#基于http构建yum网络源"}},[s._v("#")]),s._v(" 基于HTTP构建YUM网络源")]),s._v(" "),t("p",[s._v("YUM光盘源默认只能解决本机使用，局域网其他服务器无法使用YUM光盘源，如果想使用需要在每台服务器上构建YUM本地源，该方案在企业中不可取所以需要HTTP局域网YUM源解决，可以通过createrepo创建本地YUM源端，repo即repository。")]),s._v(" "),t("h4",{attrs:{id:"_1-查看-dev-cdrom"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-查看-dev-cdrom"}},[s._v("#")]),s._v(" 1. 查看/dev/cdrom")]),s._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[s._v("[root@localhost ~]# ll /dev/cdrom \nlrwxrwxrwx. 1 root root 3 Sep 14 17:07 /dev/cdrom -> sr0\n")])])]),t("h4",{attrs:{id:"_2-并挂载到-mnt-iso-下"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-并挂载到-mnt-iso-下"}},[s._v("#")]),s._v(" 2. 并挂载到/mnt/iso/下")]),s._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[s._v("[root@localhost ~]# mount /dev/cdrom /mnt/iso/\nmount: /dev/sr0 is write-protected, mounting read-only\n[root@localhost ~]# ls /mnt/iso/\nCentOS_BuildTag  EFI  EULA  GPL  images  isolinux  LiveOS  Packages  repodata  RPM-GPG-KEY-CentOS-7  RPM-GPG-KEY-CentOS-Testing-7  TRANS.TBL\n")])])]),t("h4",{attrs:{id:"_3-查看是否挂载成功"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-查看是否挂载成功"}},[s._v("#")]),s._v(" 3. 查看是否挂载成功")]),s._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[s._v("[root@localhost ~]# df -h\nFilesystem               Size  Used Avail Use% Mounted on\n/dev/mapper/centos-root   35G  2.4G   33G   7% /\ndevtmpfs                 478M     0  478M   0% /dev\ntmpfs                    489M     0  489M   0% /dev/shm\ntmpfs                    489M   19M  470M   4% /run\ntmpfs                    489M     0  489M   0% /sys/fs/cgroup\n/dev/sda1               1014M  125M  890M  13% /boot\ntmpfs                     98M     0   98M   0% /run/user/0\n/dev/sr0                 8.1G  8.1G     0 100% /mnt/iso  \n")])])]),t("h4",{attrs:{id:"_4-创建-var-www-html-centos目录"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-创建-var-www-html-centos目录"}},[s._v("#")]),s._v(" 4. 创建/var/www/html/centos目录")]),s._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[s._v("[root@localhost ~]# mkdir -p /var/www/html/centos\n")])])]),t("h4",{attrs:{id:"_5-把iso镜像的rpm包复制到-var-www-html-centos目录下一份，这里需要一点时间"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5-把iso镜像的rpm包复制到-var-www-html-centos目录下一份，这里需要一点时间"}},[s._v("#")]),s._v(" 5. 把ISO镜像的rpm包复制到/var/www/html/centos目录下一份，这里需要一点时间")]),s._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[s._v("[root@localhost ~]# cp -R /mnt/iso/Packages/* /var/www/html/centos/\n")])])]),t("h4",{attrs:{id:"_6-安装createrepo"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_6-安装createrepo"}},[s._v("#")]),s._v(" 6. 安装createrepo")]),s._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[s._v("[root@localhost centos]# yum install createrepo -y\n")])])]),t("h4",{attrs:{id:"_7-进入-var-www-html目录下使用createrepo创建本地源"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_7-进入-var-www-html目录下使用createrepo创建本地源"}},[s._v("#")]),s._v(" 7. 进入/var/www/html目录下使用createrepo创建本地源")]),s._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[s._v("[root@localhost html]# cd /var/www/html\n[root@localhost html]# createrepo centos/\nSpawning worker 0 with 9591 pkgs\nWorkers Finished\nSaving Primary metadata\nSaving file lists metadata\nSaving other metadata\nGenerating sqlite DBs\nSqlite DBs complete\n")])])]),t("h4",{attrs:{id:"_8-利用http发布yum本地源-安装httpd-web服务"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_8-利用http发布yum本地源-安装httpd-web服务"}},[s._v("#")]),s._v(" 8. 利用HTTP发布YUM本地源,安装httpd web服务")]),s._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[s._v("[root@localhost html]# yum install httpd httpd-devel -y\n")])])]),t("h4",{attrs:{id:"_9-创建apache用户和组"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_9-创建apache用户和组"}},[s._v("#")]),s._v(" 9. 创建apache用户和组")]),s._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[s._v("[root@localhost html]# useradd apache -g apache \nuseradd: user 'apache' already exists\n")])])]),t("h4",{attrs:{id:"_10-启动httpd-web服务"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_10-启动httpd-web服务"}},[s._v("#")]),s._v(" 10. 启动httpd web服务")]),s._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[s._v("[root@localhost html]# systemctl start httpd\n")])])]),t("h4",{attrs:{id:"_11-临时关闭selinux应用级安全策略"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_11-临时关闭selinux应用级安全策略"}},[s._v("#")]),s._v(" 11. 临时关闭SELinux应用级安全策略")]),s._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[s._v("[root@localhost html]# setenforce 0\n")])])]),t("h4",{attrs:{id:"_12-停止防火墙"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_12-停止防火墙"}},[s._v("#")]),s._v(" 12. 停止防火墙")]),s._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[s._v("[root@localhost html]# systemctl stop firewalld.service\n")])])]),t("h4",{attrs:{id:"_13-在yum客户端上-etc-yum-repo-d-目录下编辑base-repo文件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_13-在yum客户端上-etc-yum-repo-d-目录下编辑base-repo文件"}},[s._v("#")]),s._v(" 13. 在yum客户端上/etc/yum.repo.d/目录下编辑base.repo文件")]),s._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[s._v("[root@localhost yum.repos.d]# vim base.repo \n[base_ISO]\n## yum源显示名称\nname=centos7\n## ISO镜像挂在目录\nbaseurl=http://172.16.10.73/centos\n## 是否启动yum源\nenabled=1\n## 是否检查GPG-KEY\ngpgcheck=0\n##指定载目录下的GPG-KEY文件验证 \ngpgkey=http://mirrors.tencentyun.com/centos/RPM-GPG-KEY-CentOS-7\n")])])]),t("h4",{attrs:{id:"_14-检查是否配置成功"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_14-检查是否配置成功"}},[s._v("#")]),s._v(" 14. 检查是否配置成功")]),s._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[s._v("[root@localhost yum.repos.d]# yum repolist \nLoaded plugins: fastestmirror\nRepodata is over 2 weeks old. Install yum-cron? Or run: yum makecache fast\nLoading mirror speeds from cached hostfile\nrepo id            repo name     status\nbase_ISO           centos7       9,911\n")])])]),t("h2",{attrs:{id:"yum源端软件包扩展"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#yum源端软件包扩展"}},[s._v("#")]),s._v(" YUM源端软件包扩展")]),s._v(" "),t("p",[s._v("默认使用ISO镜像构建的HTTP YUM源，会发现缺少很多软件包。如果服务器需要挂载移动硬盘，mount挂载移动硬盘需要ntfs-3g软件包支持，而本地光盘镜像中没有该软件包，此时需要往YUM源端添加ntfs-3g软件包，添加方法如下：")]),s._v(" "),t("h4",{attrs:{id:"切换至-var-www-html-centos-目录，下载ntfs-3g软件把"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#切换至-var-www-html-centos-目录，下载ntfs-3g软件把"}},[s._v("#")]),s._v(" 切换至/var/www/html/centos/目录，下载ntfs-3g软件把")]),s._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[s._v("[root@localhost html]# cd /var/www/html/centos/\n\n[root@localhost centos]# wget http://rpmfind.net/linux/fedora/linux/development/rawhide/Everything/x86_64/os/Packages/n/ntfs-3g-2017.3.23-8.fc29.x86_64.rpm\n\n[root@localhost centos]# wget http://rpmfind.net/linux/fedora/linux/development/rawhide/Everything/x86_64/os/Packages/n/ntfs-3g-devel-2017.3.23-8.fc29.x86_64.rpm\n\n[root@localhost centos]# ls ntfs-3g-*       \nntfs-3g-2017.3.23-8.fc29.x86_64.rpm  ntfs-3g-devel-2017.3.23-8.fc29.x86_64.rpm\n")])])]),t("h4",{attrs:{id:"createrepo命令更新软件包，如需继续添加，先把软件包放到centos中，使用createrepo命令更新即可。"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#createrepo命令更新软件包，如需继续添加，先把软件包放到centos中，使用createrepo命令更新即可。"}},[s._v("#")]),s._v(" createrepo命令更新软件包，如需继续添加，先把软件包放到centos中，使用createrepo命令更新即可。")]),s._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[s._v("[root@localhost html]# createrepo --update centos/\nSpawning worker 0 with 2 pkgs\nWorkers Finished\nSaving Primary metadata\nSaving file lists metadata\nSaving other metadata\nGenerating sqlite DBs\nSqlite DBs complete\n")])])]),t("h2",{attrs:{id:"同步外网yum源"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#同步外网yum源"}},[s._v("#")]),s._v(" 同步外网YUM源")]),s._v(" "),t("p",[s._v("在实际应用中本地的PRM软件包是不能满足需要的，用户可以把外网中的YUM源中所有的软件包同步到本地，完善本地YUM源的软件包数量及完整性。")]),s._v(" "),t("p",[t("strong",[s._v("获取外网YUm源软件常见方法包括：rsync、wget、reposync，三种同步方法的区别为：")])]),s._v(" "),t("ul",[t("li",[s._v("rsync：需要外网YUM源支持rsync协议；")]),s._v(" "),t("li",[s._v("wget：wget可以直接获取；")]),s._v(" "),t("li",[s._v("reposync：可以同步几乎所有的YUM源。")])]),s._v(" "),t("h3",{attrs:{id:"reporsync，同步外网yum源软件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#reporsync，同步外网yum源软件"}},[s._v("#")]),s._v(" reporsync，同步外网YUM源软件")]),s._v(" "),t("h4",{attrs:{id:"下载centos-7-repo文件至-etc-yum-repos-d-，并安装reposync命令工具"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#下载centos-7-repo文件至-etc-yum-repos-d-，并安装reposync命令工具"}},[s._v("#")]),s._v(" 下载CentOS 7 repo文件至/etc/yum.repos.d/，并安装reposync命令工具")]),s._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[s._v("[root@localhost ~]# cd /etc/yum.repos.d/\n[root@localhost yum.repos.d]# wget http://mirrors.163.com/.help/CentOS7-Base-163.repo\n[root@localhost yum.repos.d]# yum clean all\n[root@localhost yum.repos.d]# yum repolist\n[root@localhost yum.repos.d]# yum install /etc/yum.repos.d/\n")])])]),t("blockquote",[t("p",[s._v("安装几个工具，默认的centos是没有安装，yum install createrepo yum-utils -y "),t("br"),s._v("\n安装这两个工具主要使用 createrepo 和 reposync 这两个命令")])]),s._v(" "),t("h4",{attrs:{id:"通过reposync工具，获取外网yum源所有软件，-r指定repolist-id，默认不加-r表示获取外网所有yum软件包，-p参数表示指定下载软件的路径。"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#通过reposync工具，获取外网yum源所有软件，-r指定repolist-id，默认不加-r表示获取外网所有yum软件包，-p参数表示指定下载软件的路径。"}},[s._v("#")]),s._v(" 通过reposync工具，获取外网YUM源所有软件，-r指定repolist id，默认不加-r表示获取外网所有YUM软件包，-p参数表示指定下载软件的路径。")]),s._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[s._v("[root@localhost yum.repos.d]# reposync -r base -p /var/www/html/centos/\n[root@localhost yum.repos.d]# reposync -r updates -p /var/www/html/centos/\n")])])]),t("h4",{attrs:{id:"通过reposync工具下载完所有的软件包后，需要执行createrepo更新本地yum仓库。"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#通过reposync工具下载完所有的软件包后，需要执行createrepo更新本地yum仓库。"}},[s._v("#")]),s._v(" 通过reposync工具下载完所有的软件包后，需要执行createrepo更新本地YUM仓库。")]),s._v(" "),t("p",[s._v("[root@localhost yum.repos.d]# createrepo /var/www/html/centos/")]),s._v(" "),t("h2",{attrs:{id:"思考"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#思考"}},[s._v("#")]),s._v(" 思考"),t("Badge",{attrs:{text:"本章小结",type:"warn"}})],1),s._v(" "),t("h3",{attrs:{id:"rpm及yum管理工具的区别是什么？优缺点是什么？"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#rpm及yum管理工具的区别是什么？优缺点是什么？"}},[s._v("#")]),s._v(" RPM及YUM管理工具的区别是什么？优缺点是什么？")]),s._v(" "),t("p",[t("strong",[s._v("RPM及YUM管理工具的区别")])]),s._v(" "),t("p",[s._v("yum安装是将yum源中的rpm包下载到本地，安装这个rpm包。这个rpm包是别人编译安装好的二进制包。这种方式与其说是安装不如说是，更新来的更确切一点。")]),s._v(" "),t("p",[s._v("源码安装，下载是源码包，要进行编译和安装，编译过程，可以进行参数设定。")]),s._v(" "),t("p",[t("strong",[s._v("yum安装与源码安装的的优缺点")])]),s._v(" "),t("p",[s._v("yum安装的优点，做运维的都很清楚，安装东西，方便快捷，特别是不用考虑包依赖。")]),s._v(" "),t("p",[s._v("yum安装的缺点，安装过程，人为无法干预，不能按需，安装。源里面有什么就安装什么，安装的版本也比较低。")]),s._v(" "),t("hr"),s._v(" "),t("p",[s._v("源码安装的优点，编译安装过程，可以设定参数，按照需求，进行安装，并且安装的版本，可以自己选择，灵活性比较大。")]),s._v(" "),t("p",[s._v("源码安装的缺点，由于安装包过新或者是其他问题，导致依赖的包没有，或者版本过低。这个时候就要解决包的依赖问题，linux系统中有的包，一个依赖一个，可能装一个小东西，就要解决一堆包的依赖问题，花很多时间解决包的依赖问题，得不尝失。源码安装的多了，不敢升级系统，升级系统，可能会导致以前手动装的东西，不能用。")]),s._v(" "),t("p",[s._v("很多做运维的，都认为，源码安装比yum安装的性能要好，根据参数选择安装，肯定比yum装了一大堆要好。这样认为的运维，我只能说，他不懂配置。根本不了解自已装的东西。在我看来，同一版yum安装和源码安装完全是一样的。")]),s._v(" "),t("p",[s._v("以apache以例吧，这个东西，非常常见的，用做web最广泛的工具之一，源码安装，./configure时候，可以添加很多参数，来实现订制。yum安装也可以，yum安装装了很多，apache的模块，有的模块根本用不到，无故浪费系统资源和影响性能。但是我们可以配置httpd.conf啊，不需求的模块，我们可以不LoadModule啊，通过修改配置文件，完全可以实现根源码安装一样的效果。不排除少数软件，安装后，不能配置情况，也就是说安装的时候是多少东西，就是多少东西，没有配置文件可以配置。")]),s._v(" "),t("p",[s._v("我觉得，对于刚接触linux的人来说，源码安装很有必要，这样你可以知道自己在做什么，安装过程中，肯定会遇到很多很多的问题，遇到问题，解决问题。这样才会成长。不要一直都用yum装，如果yum安装出了一点问题，就傻眼了，不知道怎么解决，这样很杯具。")]),s._v(" "),t("p",[t("strong",[s._v("参考：")]),t("a",{attrs:{href:"https://blog.csdn.net/l_liangkk/article/details/81074142",target:"_blank",rel:"noopener noreferrer"}},[s._v("yum安装与源码安装优势、劣势"),t("OutboundLink")],1)]),s._v(" "),t("h3",{attrs:{id:"安装软件时，何时选择yum安装或者源码编译安装？"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装软件时，何时选择yum安装或者源码编译安装？"}},[s._v("#")]),s._v(" 安装软件时，何时选择YUM安装或者源码编译安装？")]),s._v(" "),t("p",[s._v("对于我们来说只要能解决问题都是好方法，我们最主要的是要知道这两种方法的优缺点，找到合适的解决办法。")]),s._v(" "),t("h3",{attrs:{id:"使用源码编译安装httpd-2-4-25-tar-gz，写出安装的流程及注意事项。"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#使用源码编译安装httpd-2-4-25-tar-gz，写出安装的流程及注意事项。"}},[s._v("#")]),s._v(" 使用源码编译安装httpd-2.4.25.tar.gz，写出安装的流程及注意事项。")]),s._v(" "),t("p",[t("strong",[s._v("参考：")]),t("a",{attrs:{href:"https://blog.csdn.net/qq_37187976/article/details/79210646",target:"_blank",rel:"noopener noreferrer"}},[s._v("CentOS6编译安装HTTP2.4"),t("OutboundLink")],1)]),s._v(" "),t("h3",{attrs:{id:"如何将centos-7-linux-字符界面升级为图形界面，并设置系统默认启动图形界面。"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#如何将centos-7-linux-字符界面升级为图形界面，并设置系统默认启动图形界面。"}},[s._v("#")]),s._v(" 如何将CentOS 7 Linux 字符界面升级为图形界面，并设置系统默认启动图形界面。")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("查询当前默认的启动界面\n[root@localhost]# systemctl get-default\nmulti-user.target\n\n设置图形界面\n[root@localhost]# systemctl set-default graphical.target\n\n设置命令界面\n[root@localhost]# systemctl set-default multi-user.target\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br")])]),t("blockquote",[t("p",[s._v("multi-user.target: analogous to runlevel 3 命令界面"),t("br"),s._v("\ngraphical.target: analogous to runlevel 5 图形界面")])])])}),[],!1,null,null,null);a.default=e.exports}}]);