(window.webpackJsonp=window.webpackJsonp||[]).push([[47],{396:function(_,v,n){"use strict";n.r(v);var t=n(43),s=Object(t.a)({},(function(){var _=this,v=_.$createElement,n=_._self._c||v;return n("ContentSlotsDistributor",{attrs:{"slot-key":_.$parent.slotKey}},[n("h1",{attrs:{id:"异常"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#异常"}},[_._v("#")]),_._v(" 异常")]),_._v(" "),n("h2",[_._v("目标")]),_._v(" "),n("ul",[n("li",[_._v("异常的概念")]),_._v(" "),n("li",[_._v("捕获异常")]),_._v(" "),n("li",[_._v("异常的传递")]),_._v(" "),n("li",[_._v("抛出异常")])]),_._v(" "),n("h2",{attrs:{id:"toc_2"}},[_._v("01. 异常的概念")]),_._v(" "),n("ul",[n("li",[_._v("程序在运行时，如果 "),n("code",[_._v("Python 解释器")]),_._v(" "),n("strong",[_._v("遇到")]),_._v(" 到一个错误，"),n("strong",[_._v("会停止程序的执行，并且提示一些错误信息")]),_._v("，这就是 "),n("strong",[_._v("异常")])]),_._v(" "),n("li",[n("strong",[_._v("程序停止执行并且提示错误信息")]),_._v(" 这个动作，我们通常称之为："),n("strong",[_._v("抛出(raise)异常")])])]),_._v(" "),n("p",[n("img",{staticStyle:{width:"480px"},attrs:{src:"media/14989636063700/001_%E5%BC%82%E5%B8%B8%E7%A4%BA%E6%84%8F%E5%9B%BE.png",alt:"001_异常示意图"}}),_._v("￼")]),_._v(" "),n("blockquote",[n("p",[_._v("程序开发时，很难将 "),n("strong",[_._v("所有的特殊情况")]),_._v(" 都处理的面面俱到，通过 "),n("strong",[_._v("异常捕获")]),_._v(" 可以针对突发事件做集中的处理，从而保证程序的 "),n("strong",[_._v("稳定性和健壮性")])])]),_._v(" "),n("h2",{attrs:{id:"toc_3"}},[_._v("02. 捕获异常")]),_._v(" "),n("h3",{attrs:{id:"toc_4"}},[_._v("2.1 简单的捕获异常语法")]),_._v(" "),n("ul",[n("li",[_._v("在程序开发中，如果 "),n("strong",[_._v("对某些代码的执行不能确定是否正确")]),_._v("，可以增加 "),n("code",[_._v("try(尝试)")]),_._v(" 来 "),n("strong",[_._v("捕获异常")])]),_._v(" "),n("li",[_._v("捕获异常最简单的语法格式：")])]),_._v(" "),n("pre",[n("code",{staticClass:"language-python"},[_._v("try:\n    尝试执行的代码\nexcept:\n    出现错误的处理\n")])]),_._v(" "),n("ul",[n("li",[n("code",[_._v("try")]),_._v(" "),n("strong",[_._v("尝试")]),_._v("，下方编写要尝试代码，不确定是否能够正常执行的代码")]),_._v(" "),n("li",[n("code",[_._v("except")]),_._v(" "),n("strong",[_._v("如果不是")]),_._v("，下方编写尝试失败的代码")])]),_._v(" "),n("h4",{attrs:{id:"toc_5"}},[_._v("简单异常捕获演练 —— 要求用户输入整数")]),_._v(" "),n("pre",[n("code",{staticClass:"language-python"},[_._v('try:\n    # 提示用户输入一个数字\n    num = int(input("请输入数字："))\nexcept:\n    print("请输入正确的数字")\n')])]),_._v(" "),n("h3",{attrs:{id:"toc_6"}},[_._v("2.2 错误类型捕获")]),_._v(" "),n("ul",[n("li",[n("p",[_._v("在程序执行时，可能会遇到 "),n("strong",[_._v("不同类型的异常")]),_._v("，并且需要 "),n("strong",[_._v("针对不同类型的异常，做出不同的响应")]),_._v("，这个时候，就需要捕获错误类型了")])]),_._v(" "),n("li",[n("p",[_._v("语法如下：")])])]),_._v(" "),n("pre",[n("code",{staticClass:"language-python"},[_._v('try:\n    # 尝试执行的代码\n    pass\nexcept 错误类型1:\n    # 针对错误类型1，对应的代码处理\n    pass\nexcept (错误类型2, 错误类型3):\n    # 针对错误类型2 和 3，对应的代码处理\n    pass\nexcept Exception as result:\n    print("未知错误 %s" % result)\n')])]),_._v(" "),n("ul",[n("li",[_._v("当 "),n("code",[_._v("Python")]),_._v(" 解释器 "),n("strong",[_._v("抛出异常")]),_._v(" 时，"),n("strong",[_._v("最后一行错误信息的第一个单词，就是错误类型")])])]),_._v(" "),n("h4",{attrs:{id:"toc_7"}},[_._v("异常类型捕获演练 —— 要求用户输入整数")]),_._v(" "),n("p",[n("strong",[_._v("需求")])]),_._v(" "),n("ol",[n("li",[_._v("提示用户输入一个整数")]),_._v(" "),n("li",[_._v("使用 "),n("code",[_._v("8")]),_._v(" 除以用户输入的整数并且输出")])]),_._v(" "),n("pre",[n("code",{staticClass:"language-python"},[_._v('try:\n    num = int(input("请输入整数："))\n    result = 8 / num\n    print(result)\nexcept ValueError:\n    print("请输入正确的整数")\nexcept ZeroDivisionError:\n    print("除 0 错误")\n\n')])]),_._v(" "),n("h4",{attrs:{id:"toc_8"}},[_._v("捕获未知错误")]),_._v(" "),n("ul",[n("li",[_._v("在开发时，"),n("strong",[_._v("要预判到所有可能出现的错误")]),_._v("，还是有一定难度的")]),_._v(" "),n("li",[_._v("如果希望程序 "),n("strong",[_._v("无论出现任何错误")]),_._v("，都不会因为 "),n("code",[_._v("Python")]),_._v(" 解释器 "),n("strong",[_._v("抛出异常而被终止")]),_._v("，可以再增加一个 "),n("code",[_._v("except")])])]),_._v(" "),n("p",[_._v("语法如下：")]),_._v(" "),n("pre",[n("code",{staticClass:"language-python"},[_._v('except Exception as result:\n    print("未知错误 %s" % result)\n')])]),_._v(" "),n("h3",{attrs:{id:"toc_9"}},[_._v("2.3 异常捕获完整语法")]),_._v(" "),n("ul",[n("li",[_._v("在实际开发中，为了能够处理复杂的异常情况，完整的异常语法如下：")])]),_._v(" "),n("blockquote",[n("p",[_._v("提示：")]),_._v(" "),n("ul",[n("li",[_._v("有关完整语法的应用场景，在后续学习中，"),n("strong",[_._v("结合实际的案例")]),_._v("会更好理解")]),_._v(" "),n("li",[_._v("现在先对这个语法结构有个印象即可")])])]),_._v(" "),n("pre",[n("code",{staticClass:"language-python"},[_._v('try:\n    # 尝试执行的代码\n    pass\nexcept 错误类型1:\n    # 针对错误类型1，对应的代码处理\n    pass\nexcept 错误类型2:\n    # 针对错误类型2，对应的代码处理\n    pass\nexcept (错误类型3, 错误类型4):\n    # 针对错误类型3 和 4，对应的代码处理\n    pass\nexcept Exception as result:\n    # 打印错误信息\n    print(result)\nelse:\n    # 没有异常才会执行的代码\n    pass\nfinally:\n    # 无论是否有异常，都会执行的代码\n    print("无论是否有异常，都会执行的代码")\n')])]),_._v(" "),n("ul",[n("li",[n("code",[_._v("else")]),_._v(" 只有在没有异常时才会执行的代码")]),_._v(" "),n("li",[n("p",[n("code",[_._v("finally")]),_._v(" 无论是否有异常，都会执行的代码")])]),_._v(" "),n("li",[n("p",[_._v("之前一个演练的 "),n("strong",[_._v("完整捕获异常")]),_._v(" 的代码如下：")])])]),_._v(" "),n("pre",[n("code",{staticClass:"language-python"},[_._v('try:\n    num = int(input("请输入整数："))\n    result = 8 / num\n    print(result)\nexcept ValueError:\n    print("请输入正确的整数")\nexcept ZeroDivisionError:\n    print("除 0 错误")\nexcept Exception as result:\n    print("未知错误 %s" % result)\nelse:\n    print("正常执行")\nfinally:\n    print("执行完成，但是不保证正确")\n\n')])]),_._v(" "),n("h2",{attrs:{id:"toc_10"}},[_._v("03. 异常的传递")]),_._v(" "),n("ul",[n("li",[n("strong",[_._v("异常的传递")]),_._v(" —— 当 "),n("strong",[_._v("函数/方法")]),_._v(" 执行 "),n("strong",[_._v("出现异常")]),_._v("，会 "),n("strong",[_._v("将异常传递")]),_._v(" 给 函数/方法 的 "),n("strong",[_._v("调用一方")])]),_._v(" "),n("li",[_._v("如果 "),n("strong",[_._v("传递到主程序")]),_._v("，仍然 "),n("strong",[_._v("没有异常处理")]),_._v("，程序才会被终止")])]),_._v(" "),n("blockquote",[n("p",[_._v("提示")])]),_._v(" "),n("ul",[n("li",[_._v("在开发中，可以在主函数中增加 "),n("strong",[_._v("异常捕获")])]),_._v(" "),n("li",[_._v("而在主函数中调用的其他函数，只要出现异常，都会传递到主函数的 "),n("strong",[_._v("异常捕获")]),_._v(" 中")]),_._v(" "),n("li",[_._v("这样就不需要在代码中，增加大量的 "),n("strong",[_._v("异常捕获")]),_._v("，能够保证代码的整洁")])]),_._v(" "),n("p",[n("strong",[_._v("需求")])]),_._v(" "),n("ol",[n("li",[_._v("定义函数 "),n("code",[_._v("demo1()")]),_._v(" "),n("strong",[_._v("提示用户输入一个整数并且返回")])]),_._v(" "),n("li",[_._v("定义函数 "),n("code",[_._v("demo2()")]),_._v(" 调用 "),n("code",[_._v("demo1()")])]),_._v(" "),n("li",[_._v("在主程序中调用 "),n("code",[_._v("demo2()")])])]),_._v(" "),n("pre",[n("code",{staticClass:"language-python"},[_._v('def demo1():\n    return int(input("请输入一个整数："))\n\n\ndef demo2():\n    return demo1()\n\ntry:\n    print(demo2())\nexcept ValueError:\n    print("请输入正确的整数")\nexcept Exception as result:\n    print("未知错误 %s" % result)\n\n')])]),_._v(" "),n("h2",{attrs:{id:"toc_11"}},[_._v("04. 抛出 "),n("code",[_._v("raise")]),_._v(" 异常")]),_._v(" "),n("h3",{attrs:{id:"toc_12"}},[_._v("4.1 应用场景")]),_._v(" "),n("ul",[n("li",[_._v("在开发中，除了 "),n("strong",[_._v("代码执行出错")]),_._v(" "),n("code",[_._v("Python")]),_._v(" 解释器会 "),n("strong",[_._v("抛出")]),_._v(" 异常之外")]),_._v(" "),n("li",[_._v("还可以根据 "),n("strong",[_._v("应用程序")]),_._v(" "),n("strong",[_._v("特有的业务需求")]),_._v(" "),n("strong",[_._v("主动抛出异常")])])]),_._v(" "),n("p",[n("strong",[_._v("示例")])]),_._v(" "),n("ul",[n("li",[_._v("提示用户 "),n("strong",[_._v("输入密码")]),_._v("，如果 "),n("strong",[_._v("长度少于 8")]),_._v("，抛出 "),n("strong",[_._v("异常")])])]),_._v(" "),n("p",[n("img",{staticStyle:{width:"822px"},attrs:{src:"media/15016413521006/024_%E8%87%AA%E5%AE%9A%E4%B9%89%E5%BC%82%E5%B8%B8.png",alt:"024_自定义异常"}}),_._v("￼")]),_._v(" "),n("p",[n("strong",[_._v("注意")])]),_._v(" "),n("ul",[n("li",[_._v("当前函数 "),n("strong",[_._v("只负责")]),_._v(" 提示用户输入密码，如果 "),n("strong",[_._v("密码长度不正确，需要其他的函数进行额外处理")])]),_._v(" "),n("li",[_._v("因此可以 "),n("strong",[_._v("抛出异常")]),_._v("，由其他需要处理的函数 "),n("strong",[_._v("捕获异常")])])]),_._v(" "),n("h3",{attrs:{id:"toc_13"}},[_._v("4.2 抛出异常")]),_._v(" "),n("ul",[n("li",[n("code",[_._v("Python")]),_._v(" 中提供了一个 "),n("code",[_._v("Exception")]),_._v(" "),n("strong",[_._v("异常类")])]),_._v(" "),n("li",[_._v("在开发时，如果满足 "),n("strong",[_._v("特定业务需求时")]),_._v("，希望 "),n("strong",[_._v("抛出异常")]),_._v("，可以：\n"),n("ol",[n("li",[n("strong",[_._v("创建")]),_._v(" 一个 "),n("code",[_._v("Exception")]),_._v(" 的 "),n("strong",[_._v("对象")])]),_._v(" "),n("li",[_._v("使用 "),n("code",[_._v("raise")]),_._v(" "),n("strong",[_._v("关键字")]),_._v(" 抛出 "),n("strong",[_._v("异常对象")])])])])]),_._v(" "),n("p",[n("strong",[_._v("需求")])]),_._v(" "),n("ul",[n("li",[_._v("定义 "),n("code",[_._v("input_password")]),_._v(" 函数，提示用户输入密码")]),_._v(" "),n("li",[_._v("如果用户输入长度 < 8，抛出异常")]),_._v(" "),n("li",[_._v("如果用户输入长度 >=8，返回输入的密码")])]),_._v(" "),n("pre",[n("code",{staticClass:"language-python"},[_._v('def input_password():\n\n    # 1. 提示用户输入密码\n    pwd = input("请输入密码：")\n\n    # 2. 判断密码长度，如果长度 >= 8，返回用户输入的密码\n    if len(pwd) >= 8:\n        return pwd\n\n    # 3. 密码长度不够，需要抛出异常\n    # 1> 创建异常对象 - 使用异常的错误信息字符串作为参数\n    ex = Exception("密码长度不够")\n\n    # 2> 抛出异常对象\n    raise ex\n\n\ntry:\n    user_pwd = input_password()\n    print(user_pwd)\nexcept Exception as result:\n    print("发现错误：%s" % result)\n\n')])])])}),[],!1,null,null,null);v.default=s.exports}}]);