<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>MySQL服务器企业实战 | 咻一咻</title>
    <meta name="generator" content="VuePress 1.5.1">
    <link rel="icon" href="ico.png">
    <meta name="description" content="Data arrangement">
    <link rel="preload" href="/book/assets/css/0.styles.a914122f.css" as="style"><link rel="preload" href="/book/assets/js/app.6beacea6.js" as="script"><link rel="preload" href="/book/assets/js/2.d4211503.js" as="script"><link rel="preload" href="/book/assets/js/23.34b4c65a.js" as="script"><link rel="prefetch" href="/book/assets/js/10.ab538b22.js"><link rel="prefetch" href="/book/assets/js/11.ff43c237.js"><link rel="prefetch" href="/book/assets/js/12.19c73e40.js"><link rel="prefetch" href="/book/assets/js/13.58e739e6.js"><link rel="prefetch" href="/book/assets/js/14.5d203b2f.js"><link rel="prefetch" href="/book/assets/js/15.d5ffad59.js"><link rel="prefetch" href="/book/assets/js/16.f1892724.js"><link rel="prefetch" href="/book/assets/js/17.1b464a01.js"><link rel="prefetch" href="/book/assets/js/18.d3551f8c.js"><link rel="prefetch" href="/book/assets/js/19.c95ccc11.js"><link rel="prefetch" href="/book/assets/js/20.2322d056.js"><link rel="prefetch" href="/book/assets/js/21.d96df1dc.js"><link rel="prefetch" href="/book/assets/js/22.19576a58.js"><link rel="prefetch" href="/book/assets/js/24.41349f7e.js"><link rel="prefetch" href="/book/assets/js/25.167d455d.js"><link rel="prefetch" href="/book/assets/js/26.85e97b1e.js"><link rel="prefetch" href="/book/assets/js/27.1c4f5d1e.js"><link rel="prefetch" href="/book/assets/js/28.00a7b212.js"><link rel="prefetch" href="/book/assets/js/29.003a80c1.js"><link rel="prefetch" href="/book/assets/js/3.b5cecfc5.js"><link rel="prefetch" href="/book/assets/js/30.82f34ea1.js"><link rel="prefetch" href="/book/assets/js/31.d1b5a2de.js"><link rel="prefetch" href="/book/assets/js/32.c0b6c4e9.js"><link rel="prefetch" href="/book/assets/js/33.ae11896f.js"><link rel="prefetch" href="/book/assets/js/34.73898584.js"><link rel="prefetch" href="/book/assets/js/35.41289148.js"><link rel="prefetch" href="/book/assets/js/36.f9f46091.js"><link rel="prefetch" href="/book/assets/js/37.9efc5734.js"><link rel="prefetch" href="/book/assets/js/38.84d9e1a9.js"><link rel="prefetch" href="/book/assets/js/39.e46dc08b.js"><link rel="prefetch" href="/book/assets/js/4.5e65c180.js"><link rel="prefetch" href="/book/assets/js/40.8ddadb79.js"><link rel="prefetch" href="/book/assets/js/41.582e66cb.js"><link rel="prefetch" href="/book/assets/js/42.71b4aa4a.js"><link rel="prefetch" href="/book/assets/js/43.57835db4.js"><link rel="prefetch" href="/book/assets/js/44.d5fa4e17.js"><link rel="prefetch" href="/book/assets/js/45.cd06a740.js"><link rel="prefetch" href="/book/assets/js/46.65af01eb.js"><link rel="prefetch" href="/book/assets/js/47.8c8144ca.js"><link rel="prefetch" href="/book/assets/js/48.14e24a01.js"><link rel="prefetch" href="/book/assets/js/49.0145d788.js"><link rel="prefetch" href="/book/assets/js/5.dbc57029.js"><link rel="prefetch" href="/book/assets/js/50.2d76481d.js"><link rel="prefetch" href="/book/assets/js/51.7bd181e7.js"><link rel="prefetch" href="/book/assets/js/52.64387366.js"><link rel="prefetch" href="/book/assets/js/53.e5670611.js"><link rel="prefetch" href="/book/assets/js/54.38de349a.js"><link rel="prefetch" href="/book/assets/js/55.a101f972.js"><link rel="prefetch" href="/book/assets/js/56.219c5fb2.js"><link rel="prefetch" href="/book/assets/js/57.3fc676d3.js"><link rel="prefetch" href="/book/assets/js/58.7ea571a7.js"><link rel="prefetch" href="/book/assets/js/59.194c948a.js"><link rel="prefetch" href="/book/assets/js/6.9cac8d12.js"><link rel="prefetch" href="/book/assets/js/7.7f48c2c8.js"><link rel="prefetch" href="/book/assets/js/8.668fb685.js"><link rel="prefetch" href="/book/assets/js/9.5604aa9e.js">
    <link rel="stylesheet" href="/book/assets/css/0.styles.a914122f.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/book/" class="home-link router-link-active"><!----> <span class="site-name">咻一咻</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="linux" class="dropdown-title"><span class="title">linux</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/book/linux/" class="nav-link router-link-active">
  linux基础知识
</a></li><li class="dropdown-item"><!----> <a href="/book/Knowledge_summary/" class="nav-link">
  linux知识汇总
</a></li><li class="dropdown-item"><!----> <a href="/book/vim/" class="nav-link">
  vim编辑器
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="编程" class="dropdown-title"><span class="title">编程</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/book/python/" class="nav-link">
  python
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="随笔" class="dropdown-title"><span class="title">随笔</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/book/architect/" class="nav-link">
  架构是技术图谱
</a></li><li class="dropdown-item"><!----> <a href="/book/culture/" class="nav-link">
  程序员基础知识
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="更多" class="dropdown-title"><span class="title">更多</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/book/data/" class="nav-link">
  资料
</a></li><li class="dropdown-item"><!----> <a href="/book/link/" class="nav-link">
  关于
</a></li><li class="dropdown-item"><!----> <a href="https://www.zhangqifei.top/about/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  留言
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="linux" class="dropdown-title"><span class="title">linux</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/book/linux/" class="nav-link router-link-active">
  linux基础知识
</a></li><li class="dropdown-item"><!----> <a href="/book/Knowledge_summary/" class="nav-link">
  linux知识汇总
</a></li><li class="dropdown-item"><!----> <a href="/book/vim/" class="nav-link">
  vim编辑器
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="编程" class="dropdown-title"><span class="title">编程</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/book/python/" class="nav-link">
  python
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="随笔" class="dropdown-title"><span class="title">随笔</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/book/architect/" class="nav-link">
  架构是技术图谱
</a></li><li class="dropdown-item"><!----> <a href="/book/culture/" class="nav-link">
  程序员基础知识
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="更多" class="dropdown-title"><span class="title">更多</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/book/data/" class="nav-link">
  资料
</a></li><li class="dropdown-item"><!----> <a href="/book/link/" class="nav-link">
  关于
</a></li><li class="dropdown-item"><!----> <a href="https://www.zhangqifei.top/about/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  留言
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>linux基础</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/book/linux/" aria-current="page" class="sidebar-link">Linux快速入门</a></li><li><a href="/book/linux/command.html" class="sidebar-link">Linux必备命令</a></li><li><a href="/book/linux/user_rights.html" class="sidebar-link">Linux用户及权限管理</a></li><li><a href="/book/linux/Software.html" class="sidebar-link">Linux软件包企业实战</a></li><li><a href="/book/linux/disk.html" class="sidebar-link">Linux磁盘管理</a></li><li><a href="/book/linux/vdftpd.html" class="sidebar-link">Linux文件服务器企业实战</a></li><li><a href="/book/linux/HTTP.html" class="sidebar-link">HTTP协议详解</a></li><li><a href="/book/linux/Apache.html" class="sidebar-link">Apache Web服务器企业实战</a></li><li><a href="/book/linux/mysql.html" aria-current="page" class="active sidebar-link">MySQL服务器企业实战</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/book/linux/mysql.html#mysql数据库入门简介" class="sidebar-link">MySQL数据库入门简介</a></li><li class="sidebar-sub-header"><a href="/book/linux/mysql.html#mysql数据库安装方式" class="sidebar-link">MySQL数据库安装方式</a></li><li class="sidebar-sub-header"><a href="/book/linux/mysql.html#mysql数据库必备命令操作" class="sidebar-link">MySQL数据库必备命令操作</a></li><li class="sidebar-sub-header"><a href="/book/linux/mysql.html#mysql数据库字符集设置" class="sidebar-link">MySQL数据库字符集设置</a></li><li class="sidebar-sub-header"><a href="/book/linux/mysql.html#mysql数据库密码管理" class="sidebar-link">MySQL数据库密码管理</a></li><li class="sidebar-sub-header"><a href="/book/linux/mysql.html#mysql数据库配置文件详解" class="sidebar-link">MySQL数据库配置文件详解</a></li><li class="sidebar-sub-header"><a href="/book/linux/mysql.html#mysql数据库索引案例" class="sidebar-link">MySQL数据库索引案例</a></li><li class="sidebar-sub-header"><a href="/book/linux/mysql.html#mysql数据库慢查询" class="sidebar-link">MySQL数据库慢查询</a></li><li class="sidebar-sub-header"><a href="/book/linux/mysql.html#mysql数据库优化" class="sidebar-link">MySQL数据库优化</a></li><li class="sidebar-sub-header"><a href="/book/linux/mysql.html#mysql数据库集群实战" class="sidebar-link">MySQL数据库集群实战</a></li><li class="sidebar-sub-header"><a href="/book/linux/mysql.html#mysql主从复制实战" class="sidebar-link">MySQL主从复制实战</a></li><li class="sidebar-sub-header"><a href="/book/linux/mysql.html#mysql主从同步排错思路" class="sidebar-link">MySQL主从同步排错思路</a></li><li class="sidebar-sub-header"><a href="/book/linux/mysql.html#navicat连接数据库问题" class="sidebar-link">navicat连接数据库问题</a></li></ul></li><li><a href="/book/linux/problem.html" class="sidebar-link">问题</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="mysql服务器企业实战"><a href="#mysql服务器企业实战" class="header-anchor">#</a> MySQL服务器企业实战</h1> <p>MySQL是一个关系型数据库管理系统，由瑞典MySQL AB 公司开发，目前属于 Oracle 旗下产品。MySQL 是最流行的关系型数据库管理系统之一，在 WEB 应用方面，MySQL是最好的 RDBMS (Relational Database Management System，关系数据库管理系统) 应用软件之一。</p> <h2 id="mysql数据库入门简介"><a href="#mysql数据库入门简介" class="header-anchor">#</a> MySQL数据库入门简介</h2> <p>MySQL是一种关系数据库管理系统，关系数据库将数据保存在不同的表中，而不是将所有数据放在一个大仓库内，这样就增加了速度并提高了灵活性。MySQL所使用的 SQL 语言是用于访问数据库的最常用标准化语言。</p> <p>MYSQL数据库采用用于存储各类信息数据，例如：员工姓名、身份证ID、商城订单及金额、销售业绩及报告、学生考试成绩、网站帖子、论坛用户信息、系统报表等。</p> <p>MySQL 软件采用了双授权政策，分为社区版和商业版，由于其体积小、速度快、总体拥有成本低，尤其是开放源码这一特点，一般中小型网站的开发都选择 MySQL 作为网站数据库。由于其社区版的性能卓越，搭配 PHP 和 Apache 可组成良好的开发环境。</p> <p>RDBMS即关系数据库管理系统(Relational Database Management System)，是将数据组织为相关的行和列的系统，而管理关系数据库的计算机软件就是关系数据库管理系统，常用的数据库软件有Oracle、SQL Server、MYSQL、MariaDB、DB2等。</p> <p><strong>RDBMS的特点：</strong></p> <ol><li>数据以表格的形式出现</li> <li>每行记录数据的正是内容</li> <li>每列记录数据真实内容的数据域</li> <li>许多的行和列组成一张表</li> <li>若干的表单组成database（数据库）</li></ol> <p>目前主流的架构是LAMP（Linux + Apache + MySQL + PHP），MYSQL更是得到各位IT运维、DBA的青睐，虽然MySQL数据库已经被orcacle公司收购，不过好消息的是原MySQL创始人已独立新开发了MariaDB数据库，开源免费，目前越来越多的企业开始尝试使用，MariaDB数据库兼容MySQL数据库所有的功能和相关参数。</p> <p>MySQL数据库运行在服务器前，需要选择启动的引擎，好比一辆轿车，性能好的发动机会提升轿车的性能，从而启动、运行更加的高效、运行更加的高效。同样MySQL也有类似的发动机引擎，这里称之为MySQL引擎。</p> <p>MySQL引擎包括ISAM、MyISAM、InnoDB、Memory、CSV、BlackHOle、Archive、Performance_Schema、Berkeley、Merge、Federated、Cluster/NDB等，其中MyISAM|InnoDB使用最为广泛，以MyISAM、BDB、Memory、InnoDB以及Archive直接的引擎作比较。
<a href="https://docs.oracle.com/cd/E17952_01/mysql-5.5-en/storage-engines.html" target="_blank" rel="noopener noreferrer">存储引擎比较<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <table><thead><tr><th style="text-align:center;">引擎特性</th> <th style="text-align:center;">MyISAM</th> <th style="text-align:center;">BDB</th> <th style="text-align:center;">Memory</th> <th style="text-align:center;">InnoDB</th> <th style="text-align:center;">Archive</th></tr></thead> <tbody><tr><td style="text-align:center;">批量插入速度</td> <td style="text-align:center;">高</td> <td style="text-align:center;">高</td> <td style="text-align:center;">高</td> <td style="text-align:center;">中</td> <td style="text-align:center;">非常高</td></tr> <tr><td style="text-align:center;">集群索引</td> <td style="text-align:center;">不支持</td> <td style="text-align:center;">不支持</td> <td style="text-align:center;">不支持</td> <td style="text-align:center;">支持</td> <td style="text-align:center;">不支持</td></tr> <tr><td style="text-align:center;">数据缓存</td> <td style="text-align:center;">不支持</td> <td style="text-align:center;">不支持</td> <td style="text-align:center;">支持</td> <td style="text-align:center;">支持</td> <td style="text-align:center;">不支持</td></tr> <tr><td style="text-align:center;">牵引缓存</td> <td style="text-align:center;">支持</td> <td style="text-align:center;">不支持</td> <td style="text-align:center;">支持</td> <td style="text-align:center;">支持</td> <td style="text-align:center;">不支持</td></tr> <tr><td style="text-align:center;">数据可压缩</td> <td style="text-align:center;">支持</td> <td style="text-align:center;">不支持</td> <td style="text-align:center;">不支持</td> <td style="text-align:center;">不支持</td> <td style="text-align:center;">支持</td></tr> <tr><td style="text-align:center;">硬盘空间使用</td> <td style="text-align:center;">低</td> <td style="text-align:center;">低</td> <td style="text-align:center;">null</td> <td style="text-align:center;">高</td> <td style="text-align:center;">非常低</td></tr> <tr><td style="text-align:center;">内存使用</td> <td style="text-align:center;">低</td> <td style="text-align:center;">低</td> <td style="text-align:center;">中等</td> <td style="text-align:center;">高</td> <td style="text-align:center;">低</td></tr> <tr><td style="text-align:center;">外键支持</td> <td style="text-align:center;">不支持</td> <td style="text-align:center;">不支持</td> <td style="text-align:center;">不支持</td> <td style="text-align:center;">支持</td> <td style="text-align:center;">不支持</td></tr> <tr><td style="text-align:center;">存储限制</td> <td style="text-align:center;">没有</td> <td style="text-align:center;">没有</td> <td style="text-align:center;">有</td> <td style="text-align:center;">64TB</td> <td style="text-align:center;">没有</td></tr> <tr><td style="text-align:center;">事务安全</td> <td style="text-align:center;">不支持</td> <td style="text-align:center;">支持</td> <td style="text-align:center;">不支持</td> <td style="text-align:center;">支持</td> <td style="text-align:center;">不支持</td></tr> <tr><td style="text-align:center;">锁机制</td> <td style="text-align:center;">表锁</td> <td style="text-align:center;">页锁</td> <td style="text-align:center;">表锁</td> <td style="text-align:center;">行锁</td> <td style="text-align:center;">行锁</td></tr> <tr><td style="text-align:center;">B树索引</td> <td style="text-align:center;">支持</td> <td style="text-align:center;">支持</td> <td style="text-align:center;">支持</td> <td style="text-align:center;">支持</td> <td style="text-align:center;">不支持</td></tr> <tr><td style="text-align:center;">哈希索引</td> <td style="text-align:center;">不支持</td> <td style="text-align:center;">不支持</td> <td style="text-align:center;">支持</td> <td style="text-align:center;">支持</td> <td style="text-align:center;">不支持</td></tr> <tr><td style="text-align:center;">全文索引</td> <td style="text-align:center;">支持</td> <td style="text-align:center;">不支持</td> <td style="text-align:center;">不支持</td> <td style="text-align:center;">不支持</td> <td style="text-align:center;">不支持</td></tr></tbody></table> <p><strong>性能总结：</strong></p> <p>其中最常见的两种存储引擎是MyISAM和InnoDB</p> <table><thead><tr><th style="text-align:center;">特点</th> <th style="text-align:center;">MyISAM引擎特点</th> <th style="text-align:center;">InnoDB引擎特点</th></tr></thead> <tbody><tr><td style="text-align:center;">-</td> <td style="text-align:center;">不支持事务</td> <td style="text-align:center;">支持(ACID)事务，适合处理大量短期事务;(ACID包括：原子性（Atomicity）、一致性（Consistency）、隔离性（Isolation）、持久性（Durability）)必须具有着4种特性，否则在执行事务无法保证数据的正确性。</td></tr> <tr><td style="text-align:center;">-</td> <td style="text-align:center;">表级锁定</td> <td style="text-align:center;">行级锁</td></tr> <tr><td style="text-align:center;">-</td> <td style="text-align:center;">读写相互阻塞，写入不能读，读时不能写</td> <td style="text-align:center;">读写阻塞与事务隔离级别相关</td></tr> <tr><td style="text-align:center;">-</td> <td style="text-align:center;">只缓存索引</td> <td style="text-align:center;">可缓存数据和索引</td></tr> <tr><td style="text-align:center;">-</td> <td style="text-align:center;">不支持外键约束</td> <td style="text-align:center;">支持外键约束</td></tr> <tr><td style="text-align:center;">-</td> <td style="text-align:center;">不支持聚簇索引</td> <td style="text-align:center;">支持聚簇索引</td></tr> <tr><td style="text-align:center;">-</td> <td style="text-align:center;">读取数据较快，占用资源较少</td> <td style="text-align:center;">InnoDB 写的处理效率差一些并且会占用更多的磁盘空间以保留数据和索引</td></tr> <tr><td style="text-align:center;">-</td> <td style="text-align:center;">不支持MVCC（多版本并发控制机制）高并发</td> <td style="text-align:center;">支持MVCC高并发</td></tr> <tr><td style="text-align:center;">-</td> <td style="text-align:center;">支持全文索引</td> <td style="text-align:center;">从MySQL5.5后支持全文索引</td></tr> <tr><td style="text-align:center;">-</td> <td style="text-align:center;">MySQL5.5.5前默认的数据库引擎</td> <td style="text-align:center;">从MySQL5.5.5后为默认的数据库引擎</td></tr> <tr><td style="text-align:center;">-</td> <td style="text-align:center;">崩溃恢复性较差</td> <td style="text-align:center;">崩溃恢复性更好</td></tr> <tr><td style="text-align:center;">适用场景</td> <td style="text-align:center;">只读（或者写较少）、表较小（可以接受长时间进行修复操作）</td> <td style="text-align:center;">执行大量的insert或者update操作，出于性能方面考虑，可以使用innoDB引擎</td></tr></tbody></table> <p>BDB：可替代InnoDB的事务引擎，支持COMMIT、ROLLBACK和其他事务特性</p> <p>Memory ：将所有数据存储在RAM中，以便在需要快速查找参考和其他类似数据的环境中进行快速访问。适用存放临时数据。引擎以前被称为HEAP引擎</p> <h2 id="mysql数据库安装方式"><a href="#mysql数据库安装方式" class="header-anchor">#</a> MySQL数据库安装方式</h2> <p>MySQL数据库安装方法有三种：yum安装、二进制安装、编译安装</p> <p>（一）、yum安装</p> <div class="language- extra-class"><pre><code># CentOS 6+
yum install mysql-server mysql-devel mysql-libs -y 

# CentOS 7+
yum install mariadb-server mariadb mariadb-libs -y 
</code></pre></div><p>（二）、二进制安装5.6.42</p> <p>选择自己要安装的版本：<a href="https://dev.mysql.com/downloads/mysql/" target="_blank" rel="noopener noreferrer">下载地址<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>，这里用5.6.42这个版本：
<a href="https://dev.mysql.com/get/Downloads/MySQL-5.6/mysql-5.6.42-linux-glibc2.12-x86_64.tar.gz" target="_blank" rel="noopener noreferrer">mysql 5.6.42下载地址<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>第一步：准备账号</p> <div class="language- extra-class"><pre><code>getent passwd mysql //查看有没有mysql账号（没有的话需要创建）
useradd -r mysql -s /sbin/nologin //创建系统账号 shell类型为nologin
</code></pre></div><p>第二步：解压缩包</p> <div class="language- extra-class"><pre><code>wget https://dev.mysql.com/get/Downloads/MySQL-5.6/mysql-5.6.42-linux-glibc2.12-x86_64.tar.gz
tar xvf mysql-5.6.42-linux-glibc2.12-x86_64.tar.gz -C /usr/local/
cd /usr/local/
ln -s mysql-5.6.42-linux-glibc2.12-x86_64/ mysql  # 创建软链接
chown -R mysql:mysql mysql/  #设置权限
echo 'PATH=/usr/local/mysql/bin:$PATH' &gt;/etc/profile.d/mysql.sh #添加环境变量
. /etc/profile.d/mysql.sh  或者 source /etc/profile.d/mysql.sh 
</code></pre></div><p>第三步：数据目录存放目录</p> <div class="language- extra-class"><pre><code>mkdir -p /data/mysql
chown -R mysql:mysql /data/
chmod 700 /data/mysql/
</code></pre></div><p>第四步：执行脚本</p> <div class="language- extra-class"><pre><code>cd /usr/local/mysql/scripts/
./mysql_install_db --help 查看帮助
cd ../
yum -y install autoconf
scripts/mysql_install_db --datadir=/data/mysql/ --user=mysql 执行此脚本 必须是在mysql目录下
cp -a /usr/local/mysql/support-files/my-default.cnf /etc/my.cnf
vim /etc/my.cnf
    [mysqld]
    port= 3306
    datadir=/data/mysql  这里添加数据路径                            
    socket= /tmp/mysql.sock
    ·······
cp /usr/local/mysql/support-files/mysql.server /etc/init.d/mysqld

chkconfig --add /etc/init.d/mysqld # 添加到启动脚本
chkconfig --list  # //查看是否添加
</code></pre></div><p>第五步：启动MySQL</p> <div class="language- extra-class"><pre><code>systemctl start mysqld  # 启动
systemctl status mysqld # 状态
ss -ntl //查看端口3306 启动成功
服务启动会生成/tmp/mysql.sock 文件；服务停止删除此文件
</code></pre></div><p>第六步：安全初始化</p> <div class="language- extra-class"><pre><code>mysql&gt; select user,host from mysql.user;
+------+-----------------------+
| user | host                  |
+------+-----------------------+
| root | 127.0.0.1             |
| root | ::1                   |
|      | localhost             |
| root | localhost             |
|      | localhost.localdomain |
| root | localhost.localdomain |
+------+-----------------------+
6 rows in set (0.00 sec)

mysql&gt; select user,host,password from mysql.user;

[root@localhost ~]#mysql_secure_installation (安全初始化)
请输入root口令，你没有直接回车
Enter current password for root (enter for none): 
是否设置root口令
Set root password? [Y/n] y
New password: 
Re-enter new password: 
是否删除匿名账户
Remove anonymous users? [Y/n] y
是否禁用root用户远程连接
Disallow root login remotely? [Y/n] n
是否删除test测试文件
Remove test database and access to it? [Y/n] y
是否生效保存
Reload privilege tables now? [Y/n] y

mysql&gt; select user,host from mysql.user;
+------+-----------+
| user | host      |
+------+-----------+
| root | 127.0.0.1 |
| root | ::1       |
| root | localhost |
+------+-----------+
3 rows in set (0.00 sec)

mysql&gt; select user,host,password from mysql.user;
</code></pre></div><p>第七步：注意事项</p> <div class="language- extra-class"><pre><code>mysql -uroot -p 普通用户用root登录 
mysql&gt; system cat /etc/passwd  //能打开所有文件 并且能修改root密码 所以 mysql的root口令千万别泄露 
</code></pre></div><p>MySQL 参考手册 ：<a href="https://dev.mysql.com/doc/refman/" target="_blank" rel="noopener noreferrer">MySQL 参考手册<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>,<a href="https://dev.mysql.com/doc/refman/5.6/en/source-configuration-options.html" target="_blank" rel="noopener noreferrer">MySQL 5.6参考手册<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h2 id="mysql数据库必备命令操作"><a href="#mysql数据库必备命令操作" class="header-anchor">#</a> MySQL数据库必备命令操作</h2> <h3 id="查看存储引擎"><a href="#查看存储引擎" class="header-anchor">#</a> 查看存储引擎</h3> <div class="language- extra-class"><pre><code>查看mysql支持的存储引擎
show engines;

查看当前默认的存储引擎
show variables like '%storage_engine%';

查看库中所有表使用的存储引擎
Show table status from db_name;

查看库中指定表的存储引擎
show table status like 'tb_name';
show create table tb_name;

设置表的存储引擎：
CREATE TABLE tb_name(... ) ENGINE=InnoDB;
ALTER TABLE tb_name ENGINE=InnoDB;
</code></pre></div><p><strong>实例</strong></p> <div class="language- extra-class"><pre><code>查看mysql支持的存储引擎
mysql&gt; show engines;
+--------------------+---------+----------------------------------------------------------------+--------------+------+------------+
| Engine             | Support | Comment                                                        | Transactions | XA   | Savepoints |
+--------------------+---------+----------------------------------------------------------------+--------------+------+------------+
| MRG_MYISAM         | YES     | Collection of identical MyISAM tables                          | NO           | NO   | NO         |
| CSV                | YES     | CSV storage engine                                             | NO           | NO   | NO         |
| PERFORMANCE_SCHEMA | YES     | Performance Schema                                             | NO           | NO   | NO         |
| BLACKHOLE          | YES     | /dev/null storage engine (anything you write to it disappears) | NO           | NO   | NO         |
| MyISAM             | YES     | MyISAM storage engine                                          | NO           | NO   | NO         |
| FEDERATED          | NO      | Federated MySQL storage engine                                 | NULL         | NULL | NULL       |
| ARCHIVE            | YES     | Archive storage engine                                         | NO           | NO   | NO         |
| MEMORY             | YES     | Hash based, stored in memory, useful for temporary tables      | NO           | NO   | NO         |
| InnoDB             | DEFAULT | Supports transactions, row-level locking, and foreign keys     | YES          | YES  | YES        |
+--------------------+---------+----------------------------------------------------------------+--------------+------+------------+
9 rows in set (0.00 sec)
</code></pre></div><hr> <div class="language- extra-class"><pre><code>查看当前默认的存储引擎
mysql&gt; show variables like '%storage_engine%';
+----------------------------+--------+
| Variable_name              | Value  |
+----------------------------+--------+
| default_storage_engine     | InnoDB |
| default_tmp_storage_engine | InnoDB |
| storage_engine             | InnoDB |
+----------------------------+--------+
3 rows in set (0.00 sec)

设置默认的存储引擎：
vim /etc/my.conf
    [mysqld]
    default_storage_engine= InnoDB;
</code></pre></div><h3 id="常用命令"><a href="#常用命令" class="header-anchor">#</a> 常用命令</h3> <div class="language- extra-class"><pre><code>查看所有的数据库
show databases;

创建名为xiuyixiu的数据库
create database xiuyixiu; 

进入xiuyixiu的数据库
use xiuyixiu;

查看数据库里有多少张表
show tables;

创建t1表：包括id、name两个字段，varchar表示数据长度，用字符表示长度单位，1汉字=2字符=2字节
create table t1(id varchar(20),name varchar(20));

向t1表中插入数据
insert into t1 values(&quot;1&quot;,&quot;zhang&quot;);

查看t1表数据内容
select * from t1 ;

id、name多个条件查询
select * from t1 where id=1 and name='zhang';

查看t1表字段内容
desc t1;

修改name字段的内容
alter table t1 modify column name varchar(22);

修改name字段的内容
update t1 set name=&quot;xiuyixiu&quot; where id=1;

刷新权限
flush privileges;

删除t1表内容
delete from t1;

删除t1表
drop table t1;  

删除xiuyixiu数据库
drop database xiuyixiu;

查看数据库的字符集
show variables like '%char%';

修改MySQL t1 表存储类型
alter table t1 engine=innodb;
</code></pre></div><p><strong>实例</strong></p> <div class="language- extra-class"><pre><code>查看所有的数据库
mysql&gt; show databases;
+--------------------+
| Database           |
+--------------------+
| information_schema |
| mysql              |
| performance_schema |
+--------------------+
3 rows in set (0.00 sec)
</code></pre></div><hr> <div class="language- extra-class"><pre><code>创建名为xiuyixiu的数据库
mysql&gt; create database xiuyixiu; 
Query OK, 1 row affected (0.01 sec)
</code></pre></div><hr> <div class="language- extra-class"><pre><code>查看所有的数据库
mysql&gt; show databases;
+--------------------+
| Database           |
+--------------------+
| information_schema |
| mysql              |
| performance_schema |
| xiuyixiu           |
+--------------------+
4 rows in set (0.00 sec)
</code></pre></div><hr> <div class="language- extra-class"><pre><code>进入xiuyixiu的数据库
mysql&gt; use xiuyixiu;
Database changed
</code></pre></div><hr> <div class="language- extra-class"><pre><code>查看数据库里有多少张表
mysql&gt; show tables;
Empty set (0.00 sec)
</code></pre></div><hr> <div class="language- extra-class"><pre><code>创建t1表：包括id、name两个字段，varchar表示数据长度，用字符表示长度单位，1汉字=2字符=2字节
mysql&gt; create table t1(id varchar(20),name varchar(20));
Query OK, 0 rows affected (0.01 sec)
</code></pre></div><hr> <div class="language- extra-class"><pre><code>查看数据库里有多少张表
mysql&gt; show tables;
+--------------------+
| Tables_in_xiuyixiu |
+--------------------+
| t1                 |
+--------------------+
1 row in set (0.00 sec) 
</code></pre></div><hr> <div class="language- extra-class"><pre><code>向t1表中插入数据
mysql&gt; insert into t1 values(&quot;1&quot;,&quot;zhang&quot;);
Query OK, 1 row affected (0.00 sec)
</code></pre></div><hr> <div class="language- extra-class"><pre><code>查看t1表数据内容
mysql&gt; select * from t1 ;
+------+-------+
| id   | name  |
+------+-------+
| 1    | zhang |
+------+-------+
1 row in set (0.00 sec)
</code></pre></div><hr> <div class="language- extra-class"><pre><code>向t1表中插入数据
mysql&gt; insert into t1 values(&quot;2&quot;,&quot;zhang1&quot;);
Query OK, 1 row affected (0.00 sec)
</code></pre></div><hr> <div class="language- extra-class"><pre><code>查看t1表数据内容
mysql&gt; select * from t1 ;
+------+--------+
| id   | name   |
+------+--------+
| 1    | zhang  |
| 2    | zhang1 |
+------+--------+
2 rows in set (0.00 sec)
</code></pre></div><hr> <div class="language- extra-class"><pre><code>id、name多个条件查询
mysql&gt; select * from t1 where id=1 and name='zhang';
+------+-------+
| id   | name  |
+------+-------+
| 1    | zhang |
+------+-------+
1 row in set (0.00 sec)
</code></pre></div><hr> <div class="language- extra-class"><pre><code>查看t1表字段内容
mysql&gt; desc t1;
+-------+-------------+------+-----+---------+-------+
| Field | Type        | Null | Key | Default | Extra |
+-------+-------------+------+-----+---------+-------+
| id    | varchar(20) | YES  |     | NULL    |       |
| name  | varchar(20) | YES  |     | NULL    |       |
+-------+-------------+------+-----+---------+-------+
2 rows in set (0.00 sec)
</code></pre></div><hr> <div class="language- extra-class"><pre><code>修改name字段的内容
mysql&gt; alter table t1 modify column name varchar(22);
Query OK, 2 rows affected (0.01 sec)
Records: 2  Duplicates: 0  Warnings: 0
</code></pre></div><hr> <div class="language- extra-class"><pre><code>mysql&gt; desc t1;
+-------+-------------+------+-----+---------+-------+
| Field | Type        | Null | Key | Default | Extra |
+-------+-------------+------+-----+---------+-------+
| id    | varchar(20) | YES  |     | NULL    |       |
| name  | varchar(22) | YES  |     | NULL    |       |
+-------+-------------+------+-----+---------+-------+
2 rows in set (0.00 sec)
</code></pre></div><hr> <div class="language- extra-class"><pre><code>修改name字段的内容
mysql&gt; update t1 set name=&quot;xiuyixiu&quot; where id=1;
Query OK, 1 row affected (0.00 sec)
Rows matched: 1  Changed: 1  Warnings: 0
</code></pre></div><hr> <div class="language- extra-class"><pre><code>mysql&gt; select * from t1;
+------+----------+
| id   | name     |
+------+----------+
| 1    | xiuyixiu |
| 2    | zhang1   |
+------+----------+
2 rows in set (0.00 sec)
</code></pre></div><hr> <div class="language- extra-class"><pre><code>刷新权限
mysql&gt; flush privileges;
Query OK, 0 rows affected (0.00 sec)
</code></pre></div><hr> <div class="language- extra-class"><pre><code>删除t1表内容
mysql&gt; delete from t1;
Query OK, 2 rows affected (0.00 sec)
</code></pre></div><hr> <div class="language- extra-class"><pre><code>删除t1表
mysql&gt; drop table t1;      
Query OK, 0 rows affected (0.01 sec)
</code></pre></div><hr> <div class="language- extra-class"><pre><code>删除xiuyixiu数据库
mysql&gt; drop database xiuyixiu;
Query OK, 0 rows affected (0.00 sec)
</code></pre></div><hr> <div class="language- extra-class"><pre><code>查看数据库的字符集
mysql&gt; show variables like '%char%';
+--------------------------+----------------------------------------------------------------+
| Variable_name            | Value                                                          |
+--------------------------+----------------------------------------------------------------+
| character_set_client     | utf8                                                           |
| character_set_connection | utf8                                                           |
| character_set_database   | latin1                                                         |
| character_set_filesystem | binary                                                         |
| character_set_results    | utf8                                                           |
| character_set_server     | latin1                                                         |
| character_set_system     | utf8                                                           |
| character_sets_dir       | /usr/local/mysql-5.6.42-linux-glibc2.12-x86_64/share/charsets/ |
+--------------------------+----------------------------------------------------------------+
8 rows in set (0.00 sec)
</code></pre></div><hr> <div class="language- extra-class"><pre><code>修改MySQL t1 表存储类型
mysql&gt; alter table t1 engine=innodb;
Query OK, 0 rows affected (0.15 sec)
Records: 0  Duplicates: 0  Warnings: 0
</code></pre></div><h2 id="mysql数据库字符集设置"><a href="#mysql数据库字符集设置" class="header-anchor">#</a> MySQL数据库字符集设置</h2> <p>计算机存储的信息都是二进制数方式来表示的，读者看到的英文汉字等字符都是二进制数转换之后的结果。如果使用错误的编码解码规则时，会导致乱码！</p> <p>MySQL数据库在存储数据时，默认编码为latin1，存储的中文字符时，在显示或者Web调用时会显示为乱码解决：修改MySQL默认字符集为UTF-8</p> <p>（一）、编辑<code>/etc/my.cnf</code>配置文件，在相应段中加入相应的参数字符集，修改完后重启MySQL服务即可：</p> <div class="language- extra-class"><pre><code>[mysqld]
#默认的内部操作字符集
character-set-server=utf8  

[client]
default-character-set = utf8

[mysql]
default-character-set = utf8
</code></pre></div><p>（二）、MySQL命令行中运行如下命令：</p> <div class="language- extra-class"><pre><code>查看支持的字符集
show charset;

查看数据库的字符集
mysql&gt; show variables like '%char%';
+--------------------------+----------------------------------------------------------------+
| Variable_name            | Value                                                          |
+--------------------------+----------------------------------------------------------------+
| character_set_client     | utf8                                                           |
| character_set_connection | utf8                                                           |
| character_set_database   | latin1                                                         |
| character_set_filesystem | binary                                                         |
| character_set_results    | utf8                                                           |
| character_set_server     | latin1                                                         |
| character_set_system     | utf8                                                           |
| character_sets_dir       | /usr/local/mysql-5.6.42-linux-glibc2.12-x86_64/share/charsets/ |
+--------------------------+----------------------------------------------------------------+

character_set_client        客户端来源数据使用的字符集
character_set_connection    连接层字符集
character_set_database      当前选中数据库的默认字符集
character_set_filesystem    文件系统的编码格式，把操作系统上的文件名转化成此字符集，即把 character_set_client转换character_set_filesystem，默认binary是不做任何转换的。
character_set_results       查询结果字符集
character_set_server        默认的内部操作字符集
character_set_system        系统元数据(字段名等)字符集
character_sets_dir          是个只读数据不能更改。他是元数据的编码，相信不会有人用中文做数据库名和字段名之类的吧，这个字段和具体存储的数据无关。
</code></pre></div><p><strong>设置为utf8字符集</strong></p> <div class="language- extra-class"><pre><code>SET character_set_database = utf8;
SET character_set_server=utf8;
+--------------------------+----------------------------------------------------------------+
| Variable_name            | Value                                                          |
+--------------------------+----------------------------------------------------------------+
| character_set_client     | utf8                                                           |
| character_set_connection | utf8                                                           |
| character_set_database   | utf8                                                           |
| character_set_filesystem | binary                                                         |
| character_set_results    | utf8                                                           |
| character_set_server     | utf8                                                           |
| character_set_system     | utf8                                                           |
| character_sets_dir       | /usr/local/mysql-5.6.42-linux-glibc2.12-x86_64/share/charsets/ |
+--------------------------+----------------------------------------------------------------+
</code></pre></div><h2 id="mysql数据库密码管理"><a href="#mysql数据库密码管理" class="header-anchor">#</a> MySQL数据库密码管理</h2> <p><strong>创建用户及密码</strong></p> <div class="language- extra-class"><pre><code>mysql&gt; CREATE USER 'xiu'@'localhost' IDENTIFIED BY 'xiu123456';
Query OK, 0 rows affected (0.00 sec)

进入mysql
mysql&gt; use mysql
</code></pre></div><p><strong>查看所有用户密码及host</strong></p> <div class="language- extra-class"><pre><code>mysql&gt; select user,Password,host from user;
+------+-------------------------------------------+-----------+
| user | Password                                  | host      |
+------+-------------------------------------------+-----------+
| root | *FBD9B1347D9E508011AEF6B58349FEBCD327DE1F | %         |
| xiu  | *089993D7974C3A338BD9AD9E9AF78DC66778C5FA | localhost |
| root | *FBD9B1347D9E508011AEF6B58349FEBCD327DE1F | 127.0.0.1 |
| root | *FBD9B1347D9E508011AEF6B58349FEBCD327DE1F | ::1       |
+------+-------------------------------------------+-----------+
4 rows in set (0.00 sec)
</code></pre></div><p><strong>创建密文密码</strong></p> <div class="language- extra-class"><pre><code>mysql&gt; select password('123123');
+-------------------------------------------+
| password('123123')                        |
+-------------------------------------------+
| *E56A114692FE0DE073F9A1DD68A00EEB9703F3F1 |
+-------------------------------------------+
1 row in set (0.00 sec)

创建用户密码是密文密码
mysql&gt; create user 'xiuyi'@'localhost' identified by '*E56A114692FE0DE073F9A1DD68A00EEB9703F3F1';
Query OK, 0 rows affected (0.00 sec)
</code></pre></div><p><strong>查看所有用户密码及host</strong></p> <div class="language- extra-class"><pre><code>mysql&gt; drop user 'zhangqifei'@'localhost';
ERROR 1396 (HY000): Operation DROP USER failed for 'zhangqifei'@'localhost'
mysql&gt; select user,Password,host from user;
+-------+-------------------------------------------+-----------+
| user  | Password                                  | host      |
+-------+-------------------------------------------+-----------+
| root  | *FBD9B1347D9E508011AEF6B58349FEBCD327DE1F | %         |
| xiu   | *089993D7974C3A338BD9AD9E9AF78DC66778C5FA | localhost |
| root  | *FBD9B1347D9E508011AEF6B58349FEBCD327DE1F | 127.0.0.1 |
| root  | *FBD9B1347D9E508011AEF6B58349FEBCD327DE1F | ::1       |
| xiuyi | *1D9EC7B17BE81C896AA7BC427E6B8CD824911A87 | localhost |
+-------+-------------------------------------------+-----------+
5 rows in set (0.00 sec)
</code></pre></div><p><strong>重命名用户</strong></p> <div class="language- extra-class"><pre><code>mysql&gt; rename user 'xiuyi'@'localhost' to 'xiuyixiu'@'localhost';
Query OK, 0 rows affected (0.00 sec)

mysql&gt; select user,Password,host from user;
+----------+-------------------------------------------+-----------+
| user     | Password                                  | host      |
+----------+-------------------------------------------+-----------+
| root     | *FBD9B1347D9E508011AEF6B58349FEBCD327DE1F | %         |
| xiu      | *089993D7974C3A338BD9AD9E9AF78DC66778C5FA | localhost |
| root     | *FBD9B1347D9E508011AEF6B58349FEBCD327DE1F | 127.0.0.1 |
| root     | *FBD9B1347D9E508011AEF6B58349FEBCD327DE1F | ::1       |
| xiuyixiu | *1D9EC7B17BE81C896AA7BC427E6B8CD824911A87 | localhost |
+----------+-------------------------------------------+-----------+
5 rows in set (0.00 sec)
</code></pre></div><p><strong>修改其他用户密码</strong></p> <div class="language- extra-class"><pre><code>mysql&gt; set password for 'xiu'@'localhost'=password('xiuyixiu');
Query OK, 0 rows affected (0.00 sec)

mysql&gt; select user,Password,host from user;
+----------+-------------------------------------------+-----------+
| user     | Password                                  | host      |
+----------+-------------------------------------------+-----------+
| root     | *FBD9B1347D9E508011AEF6B58349FEBCD327DE1F | %         |
| xiu      | *B1DA621105264B8F5EBB4AB918DFA5A426C6986E | localhost |
| root     | *FBD9B1347D9E508011AEF6B58349FEBCD327DE1F | 127.0.0.1 |
| root     | *FBD9B1347D9E508011AEF6B58349FEBCD327DE1F | ::1       |
| xiuyixiu | *1D9EC7B17BE81C896AA7BC427E6B8CD824911A87 | localhost |
+----------+-------------------------------------------+-----------+
5 rows in set (0.00 sec)
</code></pre></div><p><strong>查看当前登录用户</strong></p> <div class="language- extra-class"><pre><code>mysql&gt; select user();
+----------------+
| user()         |
+----------------+
| root@localhost |
+----------------+
1 row in set (0.00 sec)

当前数据库
mysql&gt; select database();
+------------+
| database() |
+------------+
| mysql      |
+------------+
1 row in set (0.00 sec)

修改当前用户的密码
mysql&gt; set password=password('123123');
Query OK, 0 rows affected (0.00 sec)

mysql&gt; select user,Password,host from user;
+----------+-------------------------------------------+-----------+
| user     | Password                                  | host      |
+----------+-------------------------------------------+-----------+
| root     | *E56A114692FE0DE073F9A1DD68A00EEB9703F3F1 | %         |
| xiu      | *B1DA621105264B8F5EBB4AB918DFA5A426C6986E | localhost |
| root     | *FBD9B1347D9E508011AEF6B58349FEBCD327DE1F | 127.0.0.1 |
| root     | *FBD9B1347D9E508011AEF6B58349FEBCD327DE1F | ::1       |
| xiuyixiu | *1D9EC7B17BE81C896AA7BC427E6B8CD824911A87 | localhost |
+----------+-------------------------------------------+-----------+
5 rows in set (0.00 sec)
</code></pre></div><p><strong>删除用户</strong></p> <div class="language- extra-class"><pre><code>mysql&gt; drop user 'xiu'@'localhost';
Query OK, 0 rows affected (0.00 sec)

mysql&gt; select user,Password,host from user;
+----------+-------------------------------------------+-----------+
| user     | Password                                  | host      |
+----------+-------------------------------------------+-----------+
| root     | *E56A114692FE0DE073F9A1DD68A00EEB9703F3F1 | %         |
| root     | *FBD9B1347D9E508011AEF6B58349FEBCD327DE1F | 127.0.0.1 |
| root     | *FBD9B1347D9E508011AEF6B58349FEBCD327DE1F | ::1       |
| xiuyixiu | *1D9EC7B17BE81C896AA7BC427E6B8CD824911A87 | localhost |
+----------+-------------------------------------------+-----------+
4 rows in set (0.00 sec)
</code></pre></div><h3 id="用户忘记密码（1）"><a href="#用户忘记密码（1）" class="header-anchor">#</a> 用户忘记密码（1）</h3> <p>第一步：</p> <div class="language- extra-class"><pre><code>关掉数据库
systamctl stop mysqld.service

修改配置文件
vim /etc/my.cnf
    [mysqld]
    #在mysqld这段最下面插入(跳过验证)
    skip-grant-tables
开启数据库
systamctl start mysqld.service
</code></pre></div><p>第二步：</p> <div class="language- extra-class"><pre><code>进入mysql数据库
use mysql; 

查看所有用户密码及host
mysql&gt; select user,Password,host from user;
+----------+-------------------------------------------+-----------+
| user     | Password                                  | host      |
+----------+-------------------------------------------+-----------+
| root     | *E56A114692FE0DE073F9A1DD68A00EEB9703F3F1 | %         |
| root     | *FBD9B1347D9E508011AEF6B58349FEBCD327DE1F | 127.0.0.1 |
| root     | *FBD9B1347D9E508011AEF6B58349FEBCD327DE1F | ::1       |
| xiuyixiu | *1D9EC7B17BE81C896AA7BC427E6B8CD824911A87 | localhost |
+----------+-------------------------------------------+-----------+
4 rows in set (0.00 sec)

修改root密码
mysql&gt; update user set password=password('xiuyixiu') where user='root' and host='%';
Query OK, 1 row affected (0.00 sec)
Rows matched: 1  Changed: 1  Warnings: 0

查看所有用户密码及host
mysql&gt; select user,Password,host from user;
+----------+-------------------------------------------+-----------+
| user     | Password                                  | host      |
+----------+-------------------------------------------+-----------+
| root     | *FBD9B1347D9E508011AEF6B58349FEBCD327DE1F | %         |
| root     | *FBD9B1347D9E508011AEF6B58349FEBCD327DE1F | 127.0.0.1 |
| root     | *FBD9B1347D9E508011AEF6B58349FEBCD327DE1F | ::1       |
| xiuyixiu | *1D9EC7B17BE81C896AA7BC427E6B8CD824911A87 | localhost |
+----------+-------------------------------------------+-----------+
4 rows in set (0.00 sec)

刷新权限
mysql&gt; flush privileges;
Query OK, 0 rows affected (0.00 sec)
</code></pre></div><p>第三步：</p> <div class="language- extra-class"><pre><code>修改配置文件
vim /etc/my.cnf
    [mysqld]
    #删除在mysqld这段最下面插入(跳过验证)
    skip-grant-tables
重启数据库，完成修改
systamctl restart mysqld.service
</code></pre></div><h3 id="用户忘记密码（2）"><a href="#用户忘记密码（2）" class="header-anchor">#</a> 用户忘记密码（2）</h3> <p>停止MySQL服务</p> <div class="language- extra-class"><pre><code>/etc/init.d/mysqld stop
</code></pre></div><p>跳过权限方式启动</p> <div class="language- extra-class"><pre><code>[root@localhost ~]# /usr/local/mysql/bin/mysqld_safe --user=mysql --skip-grant-tables&amp;
[1] 32124
[root@localhost ~]# 181025 11:45:19 mysqld_safe Logging to '/data/mysql/localhost.localdomain.err'.
181025 11:45:19 mysqld_safe Starting mysqld daemon with databases from /data/mysql
</code></pre></div><p>连接数据库</p> <div class="language- extra-class"><pre><code>[root@localhost ~]# mysql

mysql&gt; use mysql

mysql&gt; select user,Password,host from user;
+----------+-------------------------------------------+-----------+
| user     | Password                                  | host      |
+----------+-------------------------------------------+-----------+
| root     | *FBD9B1347D9E508011AEF6B58349FEBCD327DE1F | %         |
| xiuyixiu | *B484B1A15DEEACAAFED0DE1F5EF6DD5697E8702A | %         |
| root     | *FBD9B1347D9E508011AEF6B58349FEBCD327DE1F | 127.0.0.1 |
| root     | *FBD9B1347D9E508011AEF6B58349FEBCD327DE1F | ::1       |
+----------+-------------------------------------------+-----------+
4 rows in set (0.00 sec)
</code></pre></div><p>更改密码</p> <div class="language- extra-class"><pre><code>mysql&gt; update user set password=password('zhangqifei') where user='root' and host='%';        
Query OK, 0 rows affected (0.00 sec)
Rows matched: 1  Changed: 0  Warnings: 0

mysql&gt; select user,Password,host from user;
+----------+-------------------------------------------+-----------+
| user     | Password                                  | host      |
+----------+-------------------------------------------+-----------+
| root     | *FBD9B1347D9E508011AEF6B58349FEBCD327DE1F | %         |
| xiuyixiu | *B484B1A15DEEACAAFED0DE1F5EF6DD5697E8702A | %         |
| root     | *FBD9B1347D9E508011AEF6B58349FEBCD327DE1F | 127.0.0.1 |
| root     | *FBD9B1347D9E508011AEF6B58349FEBCD327DE1F | ::1       |
+----------+-------------------------------------------+-----------+
4 rows in set (0.00 sec)
</code></pre></div><p>刷新权限</p> <div class="language- extra-class"><pre><code>mysql&gt; flush privileges;
Query OK, 0 rows affected (0.00 sec)
</code></pre></div><p>停止MySQL跳过权限表启动</p> <div class="language- extra-class"><pre><code>[root@localhost ~]# /etc/init.d/mysqld stop
Shutting down MySQL..181025 11:50:31 mysqld_safe mysqld from pid file /data/mysql/localhost.localdomain.pid ended
SUCCESS! 
[1]+  完成                  /usr/local/mysql/bin/mysqld_safe --user=mysql --skip-grant-tables
</code></pre></div><p>重新启动MySQL服务</p> <div class="language- extra-class"><pre><code>[root@localhost ~]# /etc/init.d/mysqld start
Starting MySQL. SUCCESS! 
</code></pre></div><p>登陆成功</p> <div class="language- extra-class"><pre><code>[root@localhost ~]# mysql -uroot -p
Enter password: 
mysql&gt;
</code></pre></div><h3 id="用户忘记密码（3）"><a href="#用户忘记密码（3）" class="header-anchor">#</a> 用户忘记密码（3）</h3> <div class="language- extra-class"><pre><code>修改mysql root 密码
mysqladmin -uroot -p password &quot;xiuyixiu&quot;  
</code></pre></div><h3 id="mysql权限"><a href="#mysql权限" class="header-anchor">#</a> MySQL权限</h3> <p>用户权限管理主要有以下作用：</p> <ol><li>可以限制用户访问哪些库、哪些表</li> <li>可以限制用户对哪些表执行SELECT、CREATE、DELETE、DELETE、ALTER等操作</li> <li>可以限制用户登录的IP或域名</li> <li>可以限制用户自己的权限是否可以授权给别的用户</li></ol> <p><strong>用户授权</strong></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>mysql&gt; grant all privileges on *.* to 'xiuyixiu'@'%' identified by 'xiuyixiu123456' with grant option;

all privileges：表示将所有权限授予给用户。也可指定具体的权限，如：SELECT、INSERT、UPDATE、CREATE、DROP等。
on：表示这些权限对哪些数据库和表生效，格式：数据库名.表名，这里写&quot;*&quot;表示所有数据库，所有表。如果我要指定将权限应用到test库的user表中，可以这么写：test.user
to：将权限授予哪个用户。格式：”用户名”@”登录IP或域名”。%表示没有限制，在任何主机都可以登录。比如：&quot;xiuyixiu&quot;@&quot;192.168.0.%&quot;，表示xiuyixiu这个用户只能在192.168.0.IP段登录
identified by：指定用户的登录密码
with grant option：表示允许用户将自己的权限授权给其它用户

可以使用GRANT给用户添加权限，权限会自动叠加，不会覆盖之前授予的权限，比如你先给用户添加一个SELECT权限，后来又给用户添加了一个INSERT权限，那么该用户就同时拥有了SELECT和INSERT权限。
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p><a href="https://dev.mysql.com/doc/refman/5.7/en/privileges-provided.html" target="_blank" rel="noopener noreferrer">用户详情的权限列表请参考MySQL官网说明<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p><strong>对用户做了权限变更之后，一定记得重新加载一下权限，将权限信息从内存中写入数据库。</strong></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>mysql&gt; flush privileges;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><strong>查看用户权限</strong></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>mysql&gt; use mysql

mysql&gt; select user,Password,host from user;
+----------+-------------------------------------------+-----------+
| user     | Password                                  | host      |
+----------+-------------------------------------------+-----------+
| root     | *FBD9B1347D9E508011AEF6B58349FEBCD327DE1F | %         |
| xiuyixiu | *B484B1A15DEEACAAFED0DE1F5EF6DD5697E8702A | %         |
| root     | *FBD9B1347D9E508011AEF6B58349FEBCD327DE1F | 127.0.0.1 |
| root     | *FBD9B1347D9E508011AEF6B58349FEBCD327DE1F | ::1       |
+----------+-------------------------------------------+-----------+
4 rows in set (0.00 sec)

mysql&gt; show grants for 'xiuyixiu'@'%';
+------------------------------------------------------------------------------------------------------------------------------------+
| Grants for xiuyixiu@%                                                                                                              |
+------------------------------------------------------------------------------------------------------------------------------------+
| GRANT ALL PRIVILEGES ON *.* TO 'xiuyixiu'@'%' IDENTIFIED BY PASSWORD '*B484B1A15DEEACAAFED0DE1F5EF6DD5697E8702A' WITH GRANT OPTION |
+------------------------------------------------------------------------------------------------------------------------------------+
1 row in set (0.00 sec)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><p><strong>回收权限</strong></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>删除xiuyixiu这个用户的create权限，该用户将不能创建数据库和表。最后刷新权限。

mysql&gt; revoke create on *.* 'xiuyixiu'@'%';
ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ''xiuyixiu'@'%'' at line 1
mysql&gt; revoke create on *.* from 'xiuyixiu'@'%';
Query OK, 0 rows affected (0.00 sec)

mysql&gt; show grants for 'xiuyixiu'@'%';
+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Grants for xiuyixiu@%                                                                                                                                                                                                                                                                                                                                                                                                                   |
+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| GRANT SELECT, INSERT, UPDATE, DELETE, DROP, RELOAD, SHUTDOWN, PROCESS, FILE, REFERENCES, INDEX, ALTER, SHOW DATABASES, SUPER, CREATE TEMPORARY TABLES, LOCK TABLES, EXECUTE, REPLICATION SLAVE, REPLICATION CLIENT, CREATE VIEW, SHOW VIEW, CREATE ROUTINE, ALTER ROUTINE, CREATE USER, EVENT, TRIGGER, CREATE TABLESPACE ON *.* TO 'xiuyixiu'@'%' IDENTIFIED BY PASSWORD '*B484B1A15DEEACAAFED0DE1F5EF6DD5697E8702A' WITH GRANT OPTION |
+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
1 row in set (0.00 sec)
mysql&gt; flush privileges;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h3 id="mysqladmin命令"><a href="#mysqladmin命令" class="header-anchor">#</a> mysqladmin命令</h3> <div class="language- extra-class"><pre><code>查询状态
mysqladmin -uroot -p status
</code></pre></div><hr> <div class="language- extra-class"><pre><code>每个两秒查看一次服务器的状态，总共重复5次
mysqladmin -uroot -p -i 2 -c 5 status
</code></pre></div><hr> <div class="language- extra-class"><pre><code>修改mysql root 密码
mysqladmin -uroot -p password &quot;xiuyixiu&quot;   
</code></pre></div><hr> <div class="language- extra-class"><pre><code>检查mysqlserver是否可用：
mysqladmin -uroot -p ping
</code></pre></div><hr> <div class="language- extra-class"><pre><code>查询服务器版本
mysqladmin -uroot -p version
</code></pre></div><hr> <div class="language- extra-class"><pre><code>查询服务器状态值
mysqladmin -uroot -p extended-status
</code></pre></div><hr> <div class="language- extra-class"><pre><code>查询服务器系统变量值
mysqladmin -uroot -p variables
</code></pre></div><hr> <div class="language- extra-class"><pre><code>显示服务器所有运行的进程：
mysqladmin -uroot -p processlist
mysqladmin -uroot -p -i 1 processlist        //每秒刷新一次
</code></pre></div><hr> <div class="language- extra-class"><pre><code>创建数据库
mysqladmin -uroot -p create daba-test
</code></pre></div><hr> <div class="language- extra-class"><pre><code>显示服务器上的所有数据库
mysqlshow -uroot -p
</code></pre></div><hr> <div class="language- extra-class"><pre><code>显示数据库daba-test下有些什么表
mysqlshow -uroot -p daba-test
</code></pre></div><hr> <div class="language- extra-class"><pre><code>统计daba-test 下数据库表列的汇总
mysqlshow -uroot -p daba-test -v
</code></pre></div><hr> <div class="language- extra-class"><pre><code>统计daba-test 下数据库表的列数和行数
mysqlshow -uroot -p daba-test -v -v
</code></pre></div><hr> <div class="language- extra-class"><pre><code>删除数据库 daba-test
mysqladmin -uroot -p drop daba-test
</code></pre></div><hr> <div class="language- extra-class"><pre><code>重载权限信息
mysqladmin -uroot -p reload
</code></pre></div><hr> <div class="language- extra-class"><pre><code>刷新所有表缓存，并关闭和打开log
mysqladmin -uroot -p refresh
</code></pre></div><hr> <div class="language- extra-class"><pre><code>使用安全模式关闭数据库
mysqladmin -uroot -p shutdown
</code></pre></div><hr> <div class="language- extra-class"><pre><code>同时执行多个命令
mysqladmin -u root -p process status version
</code></pre></div><h2 id="mysql数据库配置文件详解"><a href="#mysql数据库配置文件详解" class="header-anchor">#</a> MySQL数据库配置文件详解</h2> <p>以下是MySQL配置文件常用参数详解：</p> <p><a href="https://dev.mysql.com/doc/refman/5.7/en/" target="_blank" rel="noopener noreferrer">【mysql参考手册】<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p><a href="https://mariadb.com/kb/en/library/replication-and-binary-log-system-variables/" target="_blank" rel="noopener noreferrer">【mariadb参考手册】<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <div class="language- line-numbers-mode"><pre class="language-text"><code># 服务器端配置
[mysqld]
# 数据目录
datadir=/data/mysql
# socket通信设置
socket = /tmp/mysql.sock

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><div class="language- line-numbers-mode"><pre class="language-text"><code># 服务端基本设置
[mysqld]
# MySQL监听端口
port = 3307

# 为MySQL客户端程序和服务器之间的本地通讯指定一个套接字文件
socket = /data/mysqldata/3307/mysql.sock

# pid文件所在目录	
pid-file = /data/mysqldata/3307/mysql.pid

# 使用该目录作为根目录（安装目录）
basedir = /usr/local/mysql-5.7.11

# 数据文件存放的目录　　　　　　
datadir = /data/mysqldata/3307/data

# MySQL存放临时文件的目录　　　　　
tmpdir = /data/mysqldata/3307/tmp	

# 服务端默认编码（数据库级别）　　　　  
character_set_server = utf8mb4	

# 服务端默认的比对规则，排序规则　　　　　　 
collation_server = utf8mb4_bin	

# MySQL启动用户　　　　　　 
user = mysql
	　　　　　　　　　　　　　　　　
# 开启了binlog后，必须设置这个值为1.主要是考虑binlog安全
log_bin_trust_function_creators = 1

#性能优化的引擎，默认关闭
performance_schema = 0 

#secure_auth 为了防止低版本的MySQL客户端(&lt;4.1)使用旧的密码认证方式访问高版本的服务器。MySQL 5.6.7开始
#secure_auth 默认为启用值1
secure_auth = 1　
　　　　　　　　　　　　　　
#开启全文索引
#ft_min_word_len = 1	　　　　　　　　　　　 

#自动修复MySQL的myisam表
#myisam_recover	　　　
　　　　　　　　　　　	
#明确时间戳默认null方式
explicit_defaults_for_timestamp	　　　　　　	

#计划任务（事件调度器）
event_scheduler	　　　　

#跳过外部锁定;External-locking用于多进程条件下为MyISAM数据表进行锁定　　　　　　　　　　	
skip-external-locking　　　　　　　　　　　　

#跳过客户端域名解析；当新的客户连接mysqld时，mysqld创建一个新的线程来处理请求。该线程先检查是否主机名在主机名缓存中。如果不在，线程试图解析主机名。
skip-name-resolve　　　　　　　　　　　　　　

#使用这一选项以消除MySQL进行DNS解析的时间。但需要注意，如果开启该选项，则所有远程主机连接授权都要使用IP地址方式，否则MySQL将无法正常处理连接请求!
#MySQL绑定IP
#bind-address = 127.0.0.1　　　　　　　　　　

#为了安全起见，复制环境的数据库还是设置--skip-slave-start参数，防止复制随着mysql启动而自动启动
skip-slave-start　　　　　　　　　　　　　　

#The number of seconds to wait for more data from a master/slave connection before aborting the read. MySQL主从复制的时候，
#当Master和Slave之间的网络中断，但是Master和Slave无法察觉的情况下（比如防火墙或者路由问题）。
#Slave会等待slave_net_timeout设置的秒数后，才能认为网络出现故障，然后才会重连并且追赶这段时间主库的数据。
#1.用这三个参数来判断主从是否延迟是不准确的Slave_IO_Running,Slave_SQL_Running,Seconds_Behind_Master.还是用pt-heartbeat吧。
#2.slave_net_timeout不要用默认值，设置一个你能接受的延时时间。
slave_net_timeout = 30	　　　　　　　　　　　

#设定是否支持命令load data local infile。如果指定local关键词，则表明支持从客户主机读文件
local-infile = 0	　　　　　　　　　　　　　 

#指定MySQL可能的连接数量。当MySQL主线程在很短的时间内得到非常多的连接请求，该参数就起作用，之后主线程花些时间（尽管很短）检查连接并且启动一个新线程。
#back_log参数的值指出在MySQL暂时停止响应新请求之前的短时间内多少个请求可以被存在堆栈中。
back_log = 1024 　　　　　　　　　　　　　　

#sql_mode = 'PIPES_AS_CONCAT,ANSI_QUOTES,IGNORE_SPACE,NO_KEY_OPTIONS,NO_TABLE_OPTIONS,NO_FIELD_OPTIONS,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION'
#sql_mode,定义了mysql应该支持的sql语法，数据校验等!  NO_AUTO_CREATE_USER：禁止GRANT创建密码为空的用户。
#NO_ENGINE_SUBSTITUTION 如果需要的存储引擎被禁用或未编译，可以防止自动替换存储引擎
sql_mode = NO_ENGINE_SUBSTITUTION,NO_AUTO_CREATE_USER　　

　　　　　　　　　　　　　　　　　　　　　　　　　　　　 
#索引块的缓冲区大小，对MyISAM表性能影响最大的一个参数.决定索引处理的速度，尤其是索引读的速度。默认值是16M，通过检查状态值Key_read_requests和Key_reads，可以知道key_buffer_size设置是否合理
key_buffer_size = 32M　　　
　　　　　　　　　
#一个查询语句包的最大尺寸。消息缓冲区被初始化为net_buffer_length字节，但是可在需要时增加到max_allowed_packet个字节。
#该值太小则会在处理大包时产生错误。如果使用大的BLOB列，必须增加该值。
#这个值来限制server接受的数据包大小。有时候大的插入和更新会受max_allowed_packet 参数限制，导致写入或者更新失败。
max_allowed_packet = 512M　　　　　　　　　　

#线程缓存；主要用来存放每一个线程自身的标识信息，如线程id，线程运行时基本信息等等，我们可以通过 thread_stack 参数来设置为每一个线程栈分配多大的内存。
#是MySQL执行排序使用的缓冲大小。如果想要增加ORDER BY的速度，首先看是否可以让MySQL使用索引而不是额外的排序阶段。
thread_stack = 256K　　　　　　　　　　　　　

#如果不能，可以尝试增加sort_buffer_size变量的大小。
sort_buffer_size = 16M　　　　　　　　　　　 
　　　　　　　　　　　　　 
#是MySQL读入缓冲区大小。对表进行顺序扫描的请求将分配一个读入缓冲区，MySQL会为它分配一段内存缓冲区。read_buffer_size变量控制这一缓冲区的大小。
#如果对表的顺序扫描请求非常频繁，并且你认为频繁扫描进行得太慢，可以通过增加该变量值以及内存缓冲区大小提高其性能。
read_buffer_size = 16M　　　　　　　　　　　 

　　　　　　　　　　　　　　　　　　　　　　 
#应用程序经常会出现一些两表（或多表）Join的操作需求，MySQL在完成某些 Join 需求的时候（all/index join），为了减少参与Join的“被驱动表”的
#读取次数以提高性能，需要使用到 Join Buffer 来协助完成 Join操作。当 Join Buffer 太小，MySQL 不会将该 Buffer 存入磁盘文件，
#而是先将Join Buffer中的结果集与需要 Join 的表进行 Join 操作，
#然后清空 Join Buffer 中的数据，继续将剩余的结果集写入此 Buffer 中，如此往复。这势必会造成被驱动表需要被多次读取，成倍增加 IO 访问，降低效率。
join_buffer_size = 16M　　　　　　　　　　　

#是MySQL的随机读缓冲区大小。当按任意顺序读取行时(例如，按照排序顺序)，将分配一个随机读缓存区。进行排序查询时，MySQL会首先扫描一遍该缓冲，以避免磁盘搜索，
#提高查询速度，如果需要排序大量数据，可适当调高该值。但MySQL会为每个客户连接发放该缓冲空间，所以应尽量适当设置该值，以避免内存开销过大。
read_rnd_buffer_size = 32M　　　　　　　　　


#通信缓冲区在查询期间被重置到该大小。通常不要改变该参数值，但是如果内存不足，可以将它设置为查询期望的大小。
#（即，客户发出的SQL语句期望的长度。如果语句超过这个长度，缓冲区自动地被扩大，直到max_allowed_packet个字节。）
net_buffer_length = 16K　　　　　　　　　　

#当对MyISAM表执行repair table或创建索引时，用以缓存排序索引；设置太小时可能会遇到” myisam_sort_buffer_size is too small”
myisam_sort_buffer_size = 128M　　　　　　  

#默认8M，当对MyISAM非空表执行insert … select/ insert … values(…),(…)或者load data infile时，使用树状cache缓存数据，每个thread分配一个；
#注：当对MyISAM表load 大文件时，调大bulk_insert_buffer_size/myisam_sort_buffer_size/key_buffer_size会极大提升速度
bulk_insert_buffer_size = 32M　　　　　　  

#thread_cahe_size线程池，线程缓存。用来缓存空闲的线程，以至于不被销毁，如果线程缓存在的空闲线程，需要重新建立新连接，
#则会优先调用线程池中的缓存，很快就能响应连接请求。每建立一个连接，都需要一个线程与之匹配。
thread_cache_size = 384　　　　　　　　   

#工作原理： 一个SELECT查询在DB中工作后，DB会把该语句缓存下来，当同样的一个SQL再次来到DB里调用时，DB在该表没发生变化的情况下把结果从缓存中返回给Client。
#在数据库写入量或是更新量也比较大的系统，该参数不适合分配过大。而且在高并发，写入量大的系统，建系把该功能禁掉。
query_cache_size = 0　　　　　　　　　   

#决定是否缓存查询结果。这个变量有三个取值：0,1,2，分别代表了off、on、demand。
query_cache_type = 0　　　　　　　　　    　　　　　　　

#它规定了内部内存临时表的最大值，每个线程都要分配。（实际起限制作用的是tmp_table_size和max_heap_table_size的最小值。）
#如果内存临时表超出了限制，MySQL就会自动地把它转化为基于磁盘的MyISAM表，存储在指定的tmpdir目录下
tmp_table_size = 1024M　　　　　　　　　　

#独立的内存表所允许的最大容量.# 此选项为了防止意外创建一个超大的内存表导致永尽所有的内存资源.
max_heap_table_size = 512M	　　　　　　   

 #mysql打开最大文件数
open_files_limit = 10240　　　　　　　　　

#MySQL无论如何都会保留一个用于管理员（SUPER）登陆的连接，用于管理员连接数据库进行维护操作，即使当前连接数已经达到了max_connections。
#因此MySQL的实际最大可连接数为max_connections+1；
#这个参数实际起作用的最大值（实际最大可连接数）为16384，即该参数最大值不能超过16384，即使超过也以16384为准；
#增加max_connections参数的值，不会占用太多系统资源。系统资源（CPU、内存）的占用主要取决于查询的密度、效率等；
#该参数设置过小的最明显特征是出现”Too many connections”错误；
max_connections = 2000　　　　　　　　　　 

#用来限制用户资源的，0不限制；对整个服务器的用户限制
max-user-connections = 0　　　　　　　　　 

#max_connect_errors是一个MySQL中与安全有关的计数器值，它负责阻止过多尝试失败的客户端以防止暴力破解密码的情况。max_connect_errors的值与性能并无太大关系。
#当此值设置为10时，意味着如果某一客户端尝试连接此MySQL服务器，但是失败（如密码错误等等）10次，则MySQL会无条件强制阻止此客户端连接。
max_connect_errors = 100000　
　　　　　　　
#表描述符缓存大小，可减少文件打开/关闭次数；
table_open_cache = 5120　　　　　　　　　　

#interactive_time -- 指的是mysql在关闭一个交互的连接之前所要等待的秒数(交互连接如mysql gui tool中的连接
interactive_timeout = 86400　　　　　

#wait_timeout -- 指的是MySQL在关闭一个非交互的连接之前所要等待的秒数
wait_timeout = 86400　
　　　　　　　　　　　
#二进制日志缓冲大小
#我们知道InnoDB存储引擎是支持事务的，实现事务需要依赖于日志技术，为了性能，日志编码采用二进制格式。那么，我们如何记日志呢？有日志的时候，就直接写磁盘？
#可是磁盘的效率是很低的，如果你用过Nginx，，一般Nginx输出access log都是要缓冲输出的。因此，记录二进制日志的时候，我们是否也需要考虑Cache呢？
#答案是肯定的，但是Cache不是直接持久化，于是面临安全性的问题——因为系统宕机时，Cache中可能有残余的数据没来得及写入磁盘。因此，Cache要权衡，要恰到好处：
#既减少磁盘I/O，满足性能要求；又保证Cache无残留，及时持久化，满足安全要求。
binlog_cache_size = 16M　
　　　　　　　　　
#开启慢查询
slow_query_log = 1　

#超过的时间为1s；MySQL能够记录执行时间超过参数 long_query_time 设置值的SQL语句，默认是不记录的。　　　　　　　　　　　　
long_query_time = 1　　　　　　　　　　　　

log-slow-admin-statements 
#记录管理语句和没有使用index的查询记录
log-queries-not-using-indexes　　　　　　　

# *** Replication related settings ***
#在复制方面的改进就是引进了新的复制技术：基于行的复制。简言之，这种新技术就是关注表中发生变化的记录，而非以前的照抄 binlog 模式。
#从 MySQL 5.1.12 开始，可以用以下三种模式来实现：基于SQL语句的复制(statement-based replication, SBR)，基于行的复制(row-based replication, RBR)，
混合模式复制(mixed-based replication, MBR)。相应地，binlog的格式也有三种：STATEMENT，ROW，MIXED。MBR 模式中，SBR 模式是默认的。
binlog_format = ROW　　

# 为每个session 最大可分配的内存，在事务过程中用来存储二进制日志的缓存。　　　　　　　　　　
#max_binlog_cache_size = 102400　　　　　　
　　　　　
#开启二进制日志功能，binlog数据位置　　　   
log-bin = /data/mysqldata/3307/binlog/mysql-bin	　　　　　　　
log-bin-index = /data/mysqldata/3307/binlog/mysql-bin.index

#relay-log日志记录的是从服务器I/O线程将主服务器的二进制日志读取过来记录到从服务器本地文件，
#然后SQL线程会读取relay-log日志的内容并应用到从服务器
relay-log = /data/mysqldata/3307/relay/mysql-relay-bin	
　　　　
#binlog传到备机被写道relaylog里，备机的slave sql线程从relaylog里读取然后应用到本地。
relay-log-index = /data/mysqldata/3307/relay/mysql-relay-bin.index	

#服务端ID，用来高可用时做区分
server_id = 100　　　　　

#log_slave_updates是将从服务器从主服务器收到的更新记入到从服务器自己的二进制日志文件中。　　　　　　　 	
log_slave_updates = 1　　　　　　

#二进制日志自动删除的天数。默认值为0,表示“没有自动删除”。启动时和二进制日志循环时可能删除。　　　　	
expire-logs-days = 15　

#如果二进制日志写入的内容超出给定值，日志就会发生滚动。你不能将该变量设置为大于1GB或小于4096字节。 默认值是1GB。　　　　　　　　　	
max_binlog_size = 512M　　　　　　　　　　	

#replicate-wild-ignore-table参数能同步所有跨数据库的更新，比如replicate-do-db或者replicate-ignore-db不会同步类似
replicate-wild-ignore-table = mysql.%　

#设定需要复制的Table　 
#replicate-wild-do-table = db_name.%　　	

#复制时跳过一些错误;不要胡乱使用这些跳过错误的参数，除非你非常确定你在做什么。当你使用这些参数时候，MYSQL会忽略那些错误，
#这样会导致你的主从服务器数据不一致。
#slave-skip-errors = 1062,1053,1146　　　

#这两个参数一般用在主主同步中，用来错开自增值, 防止键值冲突
auto_increment_offset = 1       # 自增长字段从固定数开始
auto_increment_increment = 2　  # 自增长字段每次递增的量
　　　　　　　
#将中继日志的信息写入表:mysql.slave_realy_log_info
relay_log_info_repository = TABLE　　

#将master的连接信息写入表：mysql.salve_master_info　　　
master_info_repository = TABLE　　

#中继日志自我修复；当slave从库宕机后，假如relay-log损坏了，导致一部分中继日志没有处理，则自动放弃所有未执行的relay-log，
#并且重新从master上获取日志，这样就保证了relay-log的完整性　　　　 
relay_log_recovery = on　　　　　　　　　

# *** innodb setting ***
#InnoDB 用来高速缓冲数据和索引内存缓冲大小。 更大的设置可以使访问数据时减少磁盘 I/O。
innodb_buffer_pool_size = 4G　　　　　　　　

#单独指定数据文件的路径与大小
innodb_data_file_path = ibdata1:1G:autoextend　　

#每次commit 日志缓存中的数据刷到磁盘中。通常设置为 1，意味着在事务提交前日志已被写入磁盘， 事务可以运行更长以及服务崩溃后的修复能力。
#如果你愿意减弱这个安全，或你运行的是比较小的事务处理，可以将它设置为 0 ，以减少写日志文件的磁盘 I/O。这个选项默认设置为 0。
innodb_flush_log_at_trx_commit = 0　　　　　　

#sync_binlog=n，当每进行n次事务提交之后，MySQL将进行一次fsync之类的磁盘同步指令来将binlog_cache中的数据强制写入磁盘。
#sync_binlog = 1000　　　　　　　　　　　　

#对于多核的CPU机器，可以修改innodb_read_io_threads和innodb_write_io_threads来增加IO线程，来充分利用多核的性能
innodb_read_io_threads = 8　　
innodb_write_io_threads = 8　　　　　　　　

#Innodb Plugin引擎开始引入多种格式的行存储机制，目前支持：Antelope、Barracuda两种。其中Barracuda兼容Antelope格式。
innodb_file_format = Barracuda　　　　　　
　
#限制Innodb能打开的表的数量
innodb_open_files = 65536　　

#开始碎片回收线程。这个应该能让碎片回收得更及时而且不影响其他线程的操作　　　　　　
innodb_purge_threads = 1　　　　

#分布式事务　　　　　
innodb_support_xa = FALSE　　

#InnoDB 将日志写入日志磁盘文件前的缓冲大小。理想值为 1M 至 8M。大的日志缓冲允许事务运行时不需要将日志保存入磁盘而只到事务被提交(commit)。
#因此，如果有大的事务处理，设置大的日志缓冲可以减少磁盘I/O。　　　　　　
innodb_log_buffer_size = 256M　　　　　　

#日志组中的每个日志文件的大小(单位 MB)。如果 n 是日志组中日志文件的数目，那么理想的数值为 1M 至下面设置的缓冲池(buffer pool)大小的 1/n。较大的值，
#可以减少刷新缓冲池的次数，从而减少磁盘 I/O。但是大的日志文件意味着在崩溃时需要更长的时间来恢复数据。
innodb_log_file_size = 1G　
　　　　　　
#指定有三个日志组
innodb_log_files_in_group = 3　　
　　　　
#在回滚(rooled back)之前，InnoDB 事务将等待超时的时间(单位 秒)
#innodb_lock_wait_timeout = 120　　　　　

#innodb_max_dirty_pages_pct作用：控制Innodb的脏页在缓冲中在那个百分比之下，值在范围1-100,默认为90.这个参数的另一个用处：
#当Innodb的内存分配过大，致使swap占用严重时，可以适当的减小调整这个值，使达到swap空间释放出来。建义：这个值最大在90%，最小在15%。
#太大，缓存中每次更新需要致换数据页太多，太小，放的数据页太小，更新操作太慢。
innodb_max_dirty_pages_pct = 75　　　　　

#innodb_buffer_pool_size 一致 可以开启多个内存缓冲池，把需要缓冲的数据hash到不同的缓冲池中，这样可以并行的内存读写。
innodb_buffer_pool_instances = 4 　　　 

#这个参数据控制Innodb checkpoint时的IO能力
innodb_io_capacity = 500　　　　　　　　

#作用：使每个Innodb的表，有自已独立的表空间。如删除文件后可以回收那部分空间。
#分配原则：只有使用不使用。但ＤＢ还需要有一个公共的表空间。
innodb_file_per_table = 1　　　　　　　　

#当更新/插入的非聚集索引的数据所对应的页不在内存中时（对非聚集索引的更新操作通常会带来随机IO），会将其放到一个insert buffer中，
#当随后页面被读到内存中时，会将这些变化的记录merge到页中。当服务器比较空闲时，后台线程也会做merge操作
innodb_change_buffering = inserts　　　　


#该值影响每秒刷新脏页的操作，开启此配置后，刷新脏页会通过判断产生重做日志的速度来判断最合适的刷新脏页的数量；
innodb_adaptive_flushing = 1　　　　　　

#数据库事务隔离级别 ，读取提交内容
transaction-isolation = READ-COMMITTED　　

#innodb_flush_method这个参数控制着innodb数据文件及redo log的打开、刷写模式
#InnoDB使用O_DIRECT模式打开数据文件，用fsync()函数去更新日志和数据文件。
innodb_flush_method = O_DIRECT　　　　　　

#默认设置值为1.设置为0：表示Innodb使用自带的内存分配程序；设置为1：表示InnoDB使用操作系统的内存分配程序。
#innodb_use_sys_malloc = 1　　　　　　　　

#它强制 mysqldump 从服务器查询取得记录直接输出而不是取得所有记录后将它们缓存到内存中
[mysqldump]
quick　　　　　　　　
　　　　　　　　　
#限制server接受的数据包大小;指代mysql服务器端和客户端在一次传送数据包的过程当中数据包的大小
max_allowed_packet = 512M	

#TCP/IP和套接字通信缓冲区大小,创建长度达net_buffer_length的行　　　　	　　
net_buffer_length = 16384	　　　　	　　

[mysql]
#auto-rehash是自动补全的意思
auto-rehash　　　　　　　　　　　　　　

#isamchk数据检测恢复工具
[isamchk]	　　　　　　　　　　　　　　	
key_buffer = 256M
sort_buffer_size = 256M
read_buffer = 2M
write_buffer = 2M

#使用myisamchk实用程序来获得有关你的数据库桌表的信息、检查和修复他们或优化他们
[myisamchk]　　　　　　　　　　　　　　
key_buffer = 256M
sort_buffer_size = 256M
read_buffer = 2M
write_buffer = 2M


[mysqlhotcopy]
#mysqlhotcopy使用lock tables、flush tables和cp或scp来快速备份数据库.它是备份数据库或单个表最快的途径,完全属于物理备份,但只能用于备份MyISAM存储引擎和运行在数据库目录所在的机器上.
#与mysqldump备份不同,mysqldump属于逻辑备份,备份时是执行的sql语句.使用mysqlhotcopy命令前需要要安装相应的软件依赖包.
interactive-timeout 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br><span class="line-number">114</span><br><span class="line-number">115</span><br><span class="line-number">116</span><br><span class="line-number">117</span><br><span class="line-number">118</span><br><span class="line-number">119</span><br><span class="line-number">120</span><br><span class="line-number">121</span><br><span class="line-number">122</span><br><span class="line-number">123</span><br><span class="line-number">124</span><br><span class="line-number">125</span><br><span class="line-number">126</span><br><span class="line-number">127</span><br><span class="line-number">128</span><br><span class="line-number">129</span><br><span class="line-number">130</span><br><span class="line-number">131</span><br><span class="line-number">132</span><br><span class="line-number">133</span><br><span class="line-number">134</span><br><span class="line-number">135</span><br><span class="line-number">136</span><br><span class="line-number">137</span><br><span class="line-number">138</span><br><span class="line-number">139</span><br><span class="line-number">140</span><br><span class="line-number">141</span><br><span class="line-number">142</span><br><span class="line-number">143</span><br><span class="line-number">144</span><br><span class="line-number">145</span><br><span class="line-number">146</span><br><span class="line-number">147</span><br><span class="line-number">148</span><br><span class="line-number">149</span><br><span class="line-number">150</span><br><span class="line-number">151</span><br><span class="line-number">152</span><br><span class="line-number">153</span><br><span class="line-number">154</span><br><span class="line-number">155</span><br><span class="line-number">156</span><br><span class="line-number">157</span><br><span class="line-number">158</span><br><span class="line-number">159</span><br><span class="line-number">160</span><br><span class="line-number">161</span><br><span class="line-number">162</span><br><span class="line-number">163</span><br><span class="line-number">164</span><br><span class="line-number">165</span><br><span class="line-number">166</span><br><span class="line-number">167</span><br><span class="line-number">168</span><br><span class="line-number">169</span><br><span class="line-number">170</span><br><span class="line-number">171</span><br><span class="line-number">172</span><br><span class="line-number">173</span><br><span class="line-number">174</span><br><span class="line-number">175</span><br><span class="line-number">176</span><br><span class="line-number">177</span><br><span class="line-number">178</span><br><span class="line-number">179</span><br><span class="line-number">180</span><br><span class="line-number">181</span><br><span class="line-number">182</span><br><span class="line-number">183</span><br><span class="line-number">184</span><br><span class="line-number">185</span><br><span class="line-number">186</span><br><span class="line-number">187</span><br><span class="line-number">188</span><br><span class="line-number">189</span><br><span class="line-number">190</span><br><span class="line-number">191</span><br><span class="line-number">192</span><br><span class="line-number">193</span><br><span class="line-number">194</span><br><span class="line-number">195</span><br><span class="line-number">196</span><br><span class="line-number">197</span><br><span class="line-number">198</span><br><span class="line-number">199</span><br><span class="line-number">200</span><br><span class="line-number">201</span><br><span class="line-number">202</span><br><span class="line-number">203</span><br><span class="line-number">204</span><br><span class="line-number">205</span><br><span class="line-number">206</span><br><span class="line-number">207</span><br><span class="line-number">208</span><br><span class="line-number">209</span><br><span class="line-number">210</span><br><span class="line-number">211</span><br><span class="line-number">212</span><br><span class="line-number">213</span><br><span class="line-number">214</span><br><span class="line-number">215</span><br><span class="line-number">216</span><br><span class="line-number">217</span><br><span class="line-number">218</span><br><span class="line-number">219</span><br><span class="line-number">220</span><br><span class="line-number">221</span><br><span class="line-number">222</span><br><span class="line-number">223</span><br><span class="line-number">224</span><br><span class="line-number">225</span><br><span class="line-number">226</span><br><span class="line-number">227</span><br><span class="line-number">228</span><br><span class="line-number">229</span><br><span class="line-number">230</span><br><span class="line-number">231</span><br><span class="line-number">232</span><br><span class="line-number">233</span><br><span class="line-number">234</span><br><span class="line-number">235</span><br><span class="line-number">236</span><br><span class="line-number">237</span><br><span class="line-number">238</span><br><span class="line-number">239</span><br><span class="line-number">240</span><br><span class="line-number">241</span><br><span class="line-number">242</span><br><span class="line-number">243</span><br><span class="line-number">244</span><br><span class="line-number">245</span><br><span class="line-number">246</span><br><span class="line-number">247</span><br><span class="line-number">248</span><br><span class="line-number">249</span><br><span class="line-number">250</span><br><span class="line-number">251</span><br><span class="line-number">252</span><br><span class="line-number">253</span><br><span class="line-number">254</span><br><span class="line-number">255</span><br><span class="line-number">256</span><br><span class="line-number">257</span><br><span class="line-number">258</span><br><span class="line-number">259</span><br><span class="line-number">260</span><br><span class="line-number">261</span><br><span class="line-number">262</span><br><span class="line-number">263</span><br><span class="line-number">264</span><br><span class="line-number">265</span><br><span class="line-number">266</span><br><span class="line-number">267</span><br><span class="line-number">268</span><br><span class="line-number">269</span><br><span class="line-number">270</span><br><span class="line-number">271</span><br><span class="line-number">272</span><br><span class="line-number">273</span><br><span class="line-number">274</span><br><span class="line-number">275</span><br><span class="line-number">276</span><br><span class="line-number">277</span><br><span class="line-number">278</span><br><span class="line-number">279</span><br><span class="line-number">280</span><br><span class="line-number">281</span><br><span class="line-number">282</span><br><span class="line-number">283</span><br><span class="line-number">284</span><br><span class="line-number">285</span><br><span class="line-number">286</span><br><span class="line-number">287</span><br><span class="line-number">288</span><br><span class="line-number">289</span><br><span class="line-number">290</span><br><span class="line-number">291</span><br><span class="line-number">292</span><br><span class="line-number">293</span><br><span class="line-number">294</span><br><span class="line-number">295</span><br><span class="line-number">296</span><br><span class="line-number">297</span><br><span class="line-number">298</span><br><span class="line-number">299</span><br><span class="line-number">300</span><br><span class="line-number">301</span><br><span class="line-number">302</span><br><span class="line-number">303</span><br><span class="line-number">304</span><br><span class="line-number">305</span><br><span class="line-number">306</span><br><span class="line-number">307</span><br><span class="line-number">308</span><br><span class="line-number">309</span><br><span class="line-number">310</span><br><span class="line-number">311</span><br><span class="line-number">312</span><br><span class="line-number">313</span><br><span class="line-number">314</span><br><span class="line-number">315</span><br><span class="line-number">316</span><br><span class="line-number">317</span><br><span class="line-number">318</span><br><span class="line-number">319</span><br><span class="line-number">320</span><br><span class="line-number">321</span><br><span class="line-number">322</span><br><span class="line-number">323</span><br><span class="line-number">324</span><br><span class="line-number">325</span><br><span class="line-number">326</span><br><span class="line-number">327</span><br><span class="line-number">328</span><br><span class="line-number">329</span><br><span class="line-number">330</span><br><span class="line-number">331</span><br><span class="line-number">332</span><br><span class="line-number">333</span><br><span class="line-number">334</span><br><span class="line-number">335</span><br><span class="line-number">336</span><br><span class="line-number">337</span><br><span class="line-number">338</span><br><span class="line-number">339</span><br><span class="line-number">340</span><br><span class="line-number">341</span><br><span class="line-number">342</span><br><span class="line-number">343</span><br><span class="line-number">344</span><br><span class="line-number">345</span><br><span class="line-number">346</span><br><span class="line-number">347</span><br><span class="line-number">348</span><br><span class="line-number">349</span><br><span class="line-number">350</span><br><span class="line-number">351</span><br><span class="line-number">352</span><br><span class="line-number">353</span><br></div></div><h2 id="mysql数据库索引案例"><a href="#mysql数据库索引案例" class="header-anchor">#</a> MySQL数据库索引案例</h2> <p>MySQL索引可以用来快速寻找某些具有特定值的纪录 ，所有MySQL索引都以B-树的形式保存。如果MySQL没有索引，执行select时会从第一个纪录开始扫描整个表的所有记录，直至找到符合要求的记录。如果表中数据有上亿条数据，查询一条数据需要花费的时间会非常长，索引类似于电子书的目录与页码的对应关系，可加快数据的查找。</p> <p>如果在需要搜索条件的列上创建了索引，MySQL无需扫描全表记录即可快速得到相应的记录行。如果该表有1000000条记录，通过索引查找记录要比全表顺序扫描至少快100倍，这就是缩影在企业环境中带来的执行速度上的提升。</p> <p>MySQL数据库常见索引类型包括：普通索引（normal）、唯一索引（unique）、全文索引（full text）、主键索引（primary key）、组合索引等；以下为每个索引的应用场景及区别；</p> <ul><li>普通索引:normal,使用最为广泛。</li> <li>唯一索引：unique,不允许重复的索引，允许有空值。</li> <li>全文索引：full text,只能用于MyISAM表，full text主要用于大量的内容检索。</li> <li>主键索引：primary key，又称为特殊的唯一索引，不允许有空置。</li> <li>组合索引：为了提高MySQL效率课件里组合索引。</li></ul> <p>MySQL数据库表创建各个索引命令，以t1表为例，操作如下</p> <ul><li>主键索引</li> <li>唯一索引</li> <li>普通索引</li> <li>全文索引</li> <li>组合索引</li></ul> <h2 id="mysql数据库慢查询"><a href="#mysql数据库慢查询" class="header-anchor">#</a> MySQL数据库慢查询</h2> <h2 id="mysql数据库优化"><a href="#mysql数据库优化" class="header-anchor">#</a> MySQL数据库优化</h2> <h2 id="mysql数据库集群实战"><a href="#mysql数据库集群实战" class="header-anchor">#</a> MySQL数据库集群实战</h2> <h2 id="mysql主从复制实战"><a href="#mysql主从复制实战" class="header-anchor">#</a> MySQL主从复制实战</h2> <h2 id="mysql主从同步排错思路"><a href="#mysql主从同步排错思路" class="header-anchor">#</a> MySQL主从同步排错思路</h2> <h2 id="navicat连接数据库问题"><a href="#navicat连接数据库问题" class="header-anchor">#</a> navicat连接数据库问题</h2> <blockquote><p>排查方向 第一防火墙; 第二MySQL权限</p></blockquote> <h3 id="navicat-连接虚拟机中的数据库"><a href="#navicat-连接虚拟机中的数据库" class="header-anchor">#</a> navicat 连接虚拟机中的数据库</h3> <p>Error No.1130 Host '192.168.25.3' is not allowed to connect to this MySQL server</p> <div class="language- extra-class"><pre><code>mysql&gt; use mysql;

将相应用户数据表中的host字段改成'%'；
mysql&gt; update user set host = '%' where user = 'root';
ERROR 1062 (23000): Duplicate entry '%-root' for key 'PRIMARY'  #不予理会

刷新权限
mysql&gt; flush privileges;
Query OK, 0 rows affected (0.00 sec)

mysql&gt; select user,host from mysql.user;
+------+-----------+
| user | host      |
+------+-----------+
| root | %         |
| root | 127.0.0.1 |
| root | ::1       |
+------+-----------+
3 rows in set (0.00 sec)

重新远程连接OK
</code></pre></div><h3 id="navicat-连接：2003-can-t-connect-to-mysql-server-on-x-x-x-x-10038"><a href="#navicat-连接：2003-can-t-connect-to-mysql-server-on-x-x-x-x-10038" class="header-anchor">#</a> navicat 连接：2003 - Can't connect to MySQL server on 'x.x.x.x' (10038)</h3> <div class="language- line-numbers-mode"><pre class="language-text"><code>进入mysql
mysql&gt; use mysql
查看所有用户密码及host
mysql&gt; select user,Password,host from user;
+------+-------------------------------------------+-----------+
| user | Password                                  | host      |
+------+-------------------------------------------+-----------+
| root | *FBD9B1347D9E508011AEF6B58349FEBCD327DE1F | localhost |
| root | *FBD9B1347D9E508011AEF6B58349FEBCD327DE1F | 127.0.0.1 |
| root | *FBD9B1347D9E508011AEF6B58349FEBCD327DE1F | ::1       |
+------+-------------------------------------------+-----------+
4 rows in set (0.00 sec)

重命名用户
mysql&gt; rename user 'root'@'127.0.0.1' to 'root'@'%';
Query OK, 0 rows affected (0.00 sec)

mysql&gt; select user,Password,host from user;
+------+-------------------------------------------+-----------+
| user | Password                                  | host      |
+------+-------------------------------------------+-----------+
| root | *FBD9B1347D9E508011AEF6B58349FEBCD327DE1F | localhost |
| root | *FBD9B1347D9E508011AEF6B58349FEBCD327DE1F | %         |
| root | *FBD9B1347D9E508011AEF6B58349FEBCD327DE1F | ::1       |
+------+-------------------------------------------+-----------+
5 rows in set (0.00 sec)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><h3 id="navicat-premium连接上mysql后只能看到information-schema库"><a href="#navicat-premium连接上mysql后只能看到information-schema库" class="header-anchor">#</a> navicat premium连接上mysql后只能看到information_schema库</h3> <p>这是权限不足导致的，尽管是用root账户登录，navicat登录相当于是远程ip登录数据库，仍会出现权限不足只能看到information_schema临时库。</p> <p>处理办法：</p> <p>1.root用户登陆系统：mysql -u root -p mysql</p> <p>2.切换数据库：use mysql</p> <p>3.查看user表中root用户的localhost权限：select * from user where user='root' and host='localhost';</p> <p>4.在显示的列表中显示：root用户的localhost的权限都是'N',表示root用户本地登陆不具有权限</p> <p>5.修改root用户的localhost权限：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>update user set
`Select_priv` = 'Y',
`Insert_priv` = 'Y',
`Update_priv` = 'Y',
`Delete_priv` = 'Y',
`Create_priv` = 'Y',
`Drop_priv` = 'Y',
`Reload_priv` = 'Y',
`Shutdown_priv` = 'Y',
`Process_priv` = 'Y',
`File_priv` = 'Y',
`Grant_priv` = 'Y',
`References_priv` = 'Y',
`Index_priv` = 'Y',
`Alter_priv` = 'Y',
`Show_db_priv` = 'Y',
`Super_priv` = 'Y',
`Create_tmp_table_priv` = 'Y',
`Lock_tables_priv` = 'Y',
`Execute_priv` = 'Y',
`Repl_slave_priv` = 'Y',
`Repl_client_priv` = 'Y',
`Create_view_priv` = 'Y',
`Show_view_priv` = 'Y',
`Create_routine_priv` = 'Y',
`Alter_routine_priv` = 'Y',
`Create_user_priv` = 'Y',
`Event_priv` = 'Y',
`Trigger_priv` = 'Y',
`Create_tablespace_priv` = 'Y'

where user='root' and host='%'
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br></div></div><p>6.更新一下：flush privileges;</p> <p>7.然后重新启动下mysql，可以解决问题了</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/book/linux/Apache.html" class="prev">
        Apache Web服务器企业实战
      </a></span> <span class="next"><a href="/book/linux/problem.html">
        问题
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/book/assets/js/app.6beacea6.js" defer></script><script src="/book/assets/js/2.d4211503.js" defer></script><script src="/book/assets/js/23.34b4c65a.js" defer></script>
  </body>
</html>
